(()=>{"use strict";(()=>{function e(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function t(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function n(e,t){if(!t)return Array.from(document.querySelectorAll(e));return t.tagName.includes("-")?Array.from(t.shadowRoot.querySelectorAll(e)):Array.from(t.querySelectorAll(e))}function s(e){return e.parentElement}function o(e,t){return e.closest(t)}function i(e,t){return t.appendChild(e)}function r(e,t,n){e.setAttribute(t,n.toString())}function a(e,t){return t.getAttribute(e)}function l(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function c(e){l(e,"disabled","enabled")}function h(e){l(e,"enabled","disabled")}function u(e,t=!1){if("SELECT"!==e.tagName)throw"Error: Elmeent passed in argument is not a <select multiple>";let n=Array.from(e.selectedOptions);return t&&(n=n.map((e=>e.value))),n}const d={tool:"pen",fill:"#000000",stroke:"transparent",strokeWidth:0,size:25,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"square",sides:5,innerRadius:45,globalCompositeOperation:"source-over",filters:[]};let f={filters:[]};const p={x:NaN,y:NaN,isDrawing:!1},b={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},m={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function g(e){e.preventDefault();const n=t("canvas.index__canvas"),{x:s,y:o}=n.getBoundingClientRect();p.x=e.clientX-s,p.y=e.clientY-o}function v(e){e.preventDefault();const t="mouse"===e.pointerType&&0===e.button,n="touch"===e.pointerType;(t||n)&&(p.isDrawing=!0)}function w(e){e.preventDefault();const t="mouse"===e.pointerType&&0===e.button,n="touch"===e.pointerType;(t||n)&&(p.isDrawing=!1)}class x{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}x.arrayOfIds=[];const{log:y,error:k,table:_,time:C,timeEnd:E,timeStamp:S,timeLog:N,assert:L,clear:T,count:W,countReset:A,group:O,groupCollapsed:I,groupEnd:R,trace:M,profile:z,profileEnd:P,warn:$,debug:B,info:V,dir:q,dirxml:D}=console;function H(e){return Number(`0x${e}`)}function U(e){return e.toString(16)}function Y(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),s=t[e].slice(1).toLowerCase();t[e]=n+s}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function X(e,t){return e.split(t)}function j(e,t,n){return e.substring(t,n)}function F(e){let t=X(e,"-");for(let e=1;e<t.length;e++)t[e]=Y(t[e],"titlecase");const n=t.join();return s=",",o="",n.replaceAll(s,o);var s,o}function Z(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,s;"#"===e.charAt(0)&&(n=1,t=e.slice(n,s));let o=[j(t,0,2),j(t,2,4),j(t,4,6)];for(let e=0;e<o.length;e++){let t=o[e];o[e]=H(t)}return{red:Number(o[0]),green:Number(o[1]),blue:Number(o[2])}}function G(e,t,n){const s=e/255,o=t/255,i=n/255,r=Math.max(s,o,i),a=Math.min(s,o,i),l=r-a,c=(r+a)/2;let h,u;if(r===a)u=0,h=0;else switch(h=c>.5?l/(2-r-a):l/(r+a),r){case s:u=((o-i)/l+(o<i?6:0))/6;break;case o:u=((i-s)/l+2)/6;break;case i:u=((s-o)/l+4)/6}return{hue:Math.round(360*u),saturation:Math.round(100*h),lightness:Math.round(100*c)}}function J(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=e/360,o=t/100,i=n/100,r=(1-Math.abs(2*i-1))*o,a=6*s,l=r*(1-Math.abs(a%2-1));let c,h,u;[c,h,u]=a>=0&&a<1?[r,l,0]:a>=1&&a<2?[l,r,0]:a>=2&&a<3?[0,r,l]:a>=3&&a<4?[0,l,r]:a>=4&&a<5?[l,0,r]:[r,0,l];const d=i-r/2,f=Math.round(255*(c+d)),p=Math.round(255*(h+d)),b=Math.round(255*(u+d));return`#${U(f).padStart(2,"0")}${U(p).padStart(2,"0")}${U(b).padStart(2,"0")}`}function K(e,t,n){let s;t=t.toLowerCase(),n=n.toLowerCase();const o=t.includes("hex")&&n.includes("rgb"),i=t.includes("rgb")&&n.includes("hsl"),r=t.includes("hsl")&&n.includes("hex"),a=t.includes("hsl")&&n.includes("hwb"),l=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),h=t.includes("hex")&&n.includes("hsl");if(o)s=Z(e);else if(i)s=G(e.red,e.green,e.blue);else if(r)s=J(e.hue,e.saturation,e.lightness);else if(a)s=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=t/100,o=n/100,i=e/360,r=1-Math.max(s,o),a=1-Math.min(s,o);return{hue:Math.round(360*i),whiteness:Math.round(100*r),blackness:Math.round(100*a)}}(e.hue,e.saturation,e.lightness);else if(l){s=Z(J(e.hue,e.saturation,e.lightness))}else if(c){const t=G(e.red,e.green,e.blue);s=J(t.hue,t.saturation,t.lightness)}else{if(!h)throw new Error("Color model conversion error: Unsupported wanted color model");{const t=Z(e);s=G(t.red,t.green,t.blue)}}return s}function Q(e){const n=e.currentTarget,s=o(n,".colors__container"),i=t(".colors__input",s),r=i.value,a=i.id,{hue:l,saturation:c,lightness:h}=K(r,"hex","hsl"),u=pe(s);if(y("Before",{mustBeTransparent:u}),u)return void x.clear(b[a].animationId);y("After IF condition",{mustBeTransparent:u});if(0===c||0===h||100===h)return void x.clear(b[a].animationId);b[a].type=a,b[a].hue=l,b[a].saturation=c,b[a].lightness=h;n.checked?b[a].animationId=x.set(50,ee,i,b[a]):x.clear(b[a].animationId)}function ee(e,t){t.hue+=2,t.hue%=360;let n=K(t,"hsl","hex");n=Y(n,"uppercase");const o=s(e);e.value=n,be(o,n),d[t.type]=n}function te(e){const n=e.currentTarget,s=u(n,!0),a=o(n,"section");y(a);const l=t(".miscellaneous__active-filter-container--shape",a);for(const e of s){if(!!d.filters.find((t=>t.includes(e))))continue;const t=document.createElement("shape-filter");r(t,"filter",e),r(t,"value",0),r(t,"unit","%"),i(t,l)}}function ne(e){const n=e.currentTarget,s=u(n,!0),a=o(n,"section");y(a);const l=t(".miscellaneous__active-filter-container--canvas",a);for(const e of s){if(!!f.filters.find((t=>t.includes(e))))continue;const t=document.createElement("canvas-filter");r(t,"filter",e),r(t,"value",0),r(t,"unit","%"),i(t,l)}}function se(e){const t=e.currentTarget.value;d.globalCompositeOperation=t}function oe(e){const t=e.currentTarget;d.tool=t.id,y("change",d.tool)}function ie(e){const n=e.currentTarget,s=X(n.id,"-")[0];d.shape=s;const i="polygon"!==s&&"star"!==s;d.hasEditableShape=!i;const r=o(n,"fieldset"),a=t("input#shape-sides-amount",r),l=t("input#shape-star-inner-radius",r);!0===d.hasEditableShape?c(a):h(a);"star"===s?c(l):h(l)}function re(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;le(t,0,Number.POSITIVE_INFINITY);const n=F(a("for",s(t)));d[n]=t.valueAsNumber}function ae(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;le(t,Number(t.min),Number(t.max));switch(F(a("for",s(t)))){case"shapeSidesAmount":d.sides=t.valueAsNumber;break;case"shapeStarInnerRadius":d.innerRadius=t.valueAsNumber}}function le(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const s=e.valueAsNumber;s>n&&(e.valueAsNumber=n);s<t&&(e.valueAsNumber=t)}function ce(e){const t=e.currentTarget,n=t.name;t.checked?m[n].id=x.set(10,he,t):x.clear(m[n].id)}function he(e){const n=e.name,s=o(e,".controls__brush-container"),i=t(".controls__input--range",s),r=i.valueAsNumber,a=Number(i.max),l=Number(i.min);switch(n){case"size":{r>=a&&(m[n].direction="backwards");r<=l&&(m[n].direction="forwards");const e="forwards"===m[n].direction;i.valueAsNumber=e?r+1:r-1;break}case"rotation":{const e=r>=a;i.valueAsNumber=r+1,e&&(i.valueAsNumber=l);break}}const c=`${i.valueAsNumber}`,h=i.name;d[h]=i.valueAsNumber,be(s,c)}function ue(e){const t=e.currentTarget,n=t.valueAsNumber,o=s(t),i=t.name;d[i]=n,be(o,n)}function de(e){const n=e.currentTarget,o=Y(n.value,"uppercase"),i=s(n);be(i,o);const r=t("div",s(i)),a=n.id,l=pe(r);d[a]=l?"transparent":o}function fe(e){const i=e.currentTarget,r=X(i.id,"-")[0],a=s(o(i,"div"));if(i.checked){const e=Y(t("input[type=color]",a).value,"uppercase");d[r]=e}else{const e=n("input[type=checkbox]",a)[1];!0===(null==e?void 0:e.checked)&&(e.checked=!1),d[r]="transparent"}y(d)}function pe(e){return!t("input[type=checkbox]",e).checked}function be(e,n){t("span",e).textContent=n}function me(e,t,n,...s){let o=(i=e,Array.from(i));var i;let r=[];return r=!!s.length?o.splice(t,n,...s):o.splice(t,n),{removedItems:r,newArray:o}}function ge(e,t=""){return e.join(t)}function ve(e,t){return e.getContext("2d",t)}class we{constructor(e,{tool:t,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:g,y:v,isDrawing:w}){this.canvas=e,this.context=ve(this.canvas),this.updatePropertyValues({tool:t,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:g,y:v,isDrawing:w})}updatePropertyValues({tool:e,fill:t,stroke:n,strokeWidth:s,size:o,angle:i,shadow:r,shadowBlur:a,shadowOffsetX:l,shadowOffsetY:c,hasEditableShape:h,shape:u,sides:d,innerRadius:f,globalCompositeOperation:p,filters:b},{x:m,y:g,isDrawing:v}){this.tool=e,this.fill=t,this.stroke=n,this.strokeWidth=s,this.size=o,this.angle=i,this.context.shadowColor=r,this.context.shadowBlur=a,this.context.shadowOffsetX=l,this.context.shadowOffsetY=c,this.hasEditableShape=h,this.shape=u,this.sides=d,this.innerRadius=f,this.context.globalCompositeOperation=p;const w=ge(b," "),x=!w.length;this.context.filter=x?"none":w,this.x=m,this.y=g,this.isDrawing=v}drawOnCanvas(){if(!this.isDrawing)return;if("eraser"===this.tool)return void this.erase();if("pen"===this.tool)switch(this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare();break;case"star":this.drawStar();break;case"polygon":this.drawPolygon()}}drawCircle(){this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.beginPath(),this.context.arc(this.x,this.y,this.size,0,2*Math.PI),this.context.fill();this.strokeWidth>0&&this.context.stroke()}drawSquare(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.fillRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth;this.strokeWidth>0&&this.context.strokeRect(-this.size,-this.size,2*this.size,2*this.size),this.context.restore()}erase(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.clearRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.restore()}drawPolygon(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let e=1;e<this.sides;e++){const t=e*Math.PI*2/this.sides,n=this.size*Math.cos(t),s=this.size*Math.sin(t);this.context.lineTo(n,s)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}drawStar(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let e=1;e<2*this.sides;e++){const t=e%2==0?this.size:this.innerRadius,n=e*Math.PI/this.sides,s=t*Math.cos(n),o=t*Math.sin(n);this.context.lineTo(s,o)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}}function xe(e,t,n){const s=`${e}(${t}${n})`;y("Filter to change:",e,t,n);let o=d.filters.findIndex((t=>t.includes(e)));if(o<0)return;const{newArray:i}=me(d.filters,o,1,s);d.filters=i}const ye="\n@media (prefers-reduced-motion: reduce) {\n\n    *,\n    :before,\n    ::after {\n        -webkit-animation: none !important;\n        animation: none !important;\n\n        transition: none !important;\n    }\n}\n\n/* Reset */\n*,\n::before,\n::after {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\n\n*::selection {\n    -webkit-text-stroke: transparent;\n\n    color: var(--selection-color);\n\n    background-color: var(--selection-bg-color);\n}\n\nhtml {\n    scroll-behavior: smooth;\n    scroll-padding-top: 0%;\n    scroll-snap-type: y proximity;\n\n    color-scheme: dark light;\n}\n\n@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;500;700&display=swap);\n\nbody {\n    min-height: 100vh;\n\n    font-family: Roboto, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Cantarell, Open Sans, Helvetica Neue, sans-serif;\n\n    background-color: var(--bg-primary);\n    color: var(--color-primary);\n\n\n    overflow-x: hidden;\n\n    transition:\n        background-color 650ms ease-in-out,\n        color 350ms ease-in-out;\n\n}\n\n:is(ul, ol) {\n    list-style-type: none;\n}\n\n/*\n//⚠ We make the border transparent so that if the user has a high contrast text mode enable the border will still appear for them\n//Good for accessibility\n*/\nbutton {\n    border-color: transparent;\n    background-color: transparent;\n\n    font-family: inherit;\n    color: inherit;\n\n\n    &:hover {\n        cursor: pointer;\n\n        &:disabled {\n            cursor: not-allowed;\n        }\n    }\n\n}\n\n\ninput {\n    font-family: inherit;\n\n\n    border-color: transparent;\n    outline-color: transparent;\n\n    &:hover {\n        cursor: pointer;\n    }\n\n    &:focus {\n        border-color: transparent;\n        outline: transparent;\n    }\n\n    &:disabled {\n        cursor: not-allowed;\n    }\n}\n\n\ntextarea {\n    font-family: inherit;\n    border-color: transparent;\n\n    &:focus {\n        border-color: transparent;\n        outline: transparent;\n    }\n}\n\na {\n    text-decoration: none;\n    color: inherit;\n\n    &:visited {\n        color: currentColor;\n    }\n}\n\nlabel {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\nfieldset {\n    border-color: transparent;\n}\n\nlegend {\n    position: static;\n}\n\ndialog {\n    position: fixed;\n    border: transparent;\n    margin: 0;\n    padding: 0;\n    z-index: 0;\n    @include absolute-center;\n}\n\nselect {\n    border: transparent;\n    font-family: inherit;\n\n    &:hover {\n        cursor: pointer;\n    }\n}\n\noption {\n    font-family: inherit;\n}\n\n\n:is(p, h1, h2, h3, h4,\n    h5, h6, span):empty {\n    display: none !important;}\n",ke="\n/* \n    Hides the element and all its descendants from view\n */\n.hide {\n    display: none !important;\n}\n\n/* \n    Hides the element from view except for screen readers \n    \n    - Good for accessibilty and by consequence SEO\n*/\n.screen-readers-only {\n    /*    \n    Positions the element off the screen \n    */ \n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n\n    /*    \n    Sets the dimensions of the element to 1×1 px \n    */ \n    height: 1px;\n    width: 1px;\n\n    /*    \n    Hides any content that overflows the element \n    */ \n    overflow: hidden;\n\n    /*    \n    Positions the element absolutely \n    */ \n    position: absolute;\n\n    /*    \n    Prevents line breaks in the element \n    */ \n    white-space: nowrap;\n}\n\n/* \n    Disables pointer (click on desktop and tap on mobile) events for the element and its descendants \n*/\n.no-pointer-events {\n    pointer-events: none;\n}\n\n",_e="\n:host {\n    --bg-primary: hwb(0 100% 0%);\n    --bg-secondary: #f0efef;\n    --bg-tertiary: #676767;\n    --bg-radio-button: #48c848;\n    --bg-canvas: #fff;\n    --color-primary: #000;\n    --color-secondary: gray;\n    --semi-transparent-bg: hsla(0, 0%, 100%, .7);\n    --border-color: #dbdbdb;\n    --scrollbar-track-bg-color: #fff;\n    --scrollbar-thumb-bg-color: #545454;\n    --scrollbar-thumb-bg-color--hover: #757575;\n    --scrollbar-thumb-bg-color--active: #b0b0b0;\n    --selection-bg-color: hwb(240 0% 0%);\n    --selection-color: #fff;\n    --out-of-range-bg: #fdd;\n    --out-of-range-color: #ff441b;\n    --fill-color: #000;\n    --stroke-color: transparent\n}\n\n::backdrop {\n    --backdrop-bg-color: hsla(0, 0%, 100%, .5);\n    --scrollbar-track-bg-color: #fff;\n    --scrollbar-thumb-bg-color: #545454;\n    --scrollbar-thumb-bg-color--hover: #757575;\n    --scrollbar-thumb-bg-color--active: #b0b0b0}\n",Ce="\n\n@media(prefers-color-scheme:dark) {\n    :host {\n        --bg-primary: #000;\n        --bg-secondary: #232323;\n        --bg-tertiary: #7a7a7a;\n        --bg-radio-button: green;\n        --color-primary: #fff;\n        --semi-transparent-bg: rgba(0, 0, 0, .7);\n        --bg-canvas: #505050;\n        --scrollbar-track-bg-color: #000;\n        --scrollbar-thumb-bg-color: #ababab;\n        --scrollbar-thumb-bg-color--hover: #8a8a8a;\n        --scrollbar-thumb-bg-color--active: #4f4f4f;\n        --selection-bg: #838383;\n        --selection-color: #fff;\n        --selection-bg-color: orange;\n        --selection-color: #000;\n        --out-of-range-bg: #290000;\n        --out-of-range-color: #eb3941\n    }\n\n    ::backdrop {\n        --backdrop-bg-color: rgba(0, 0, 0, .5);\n        --scrollbar-track-bg-color: #000;\n        --scrollbar-thumb-bg-color: #ababab;\n        --scrollbar-thumb-bg-color--hover: #8a8a8a;\n        --scrollbar-thumb-bg-color--active: #4f4f4f\n    }\n}\n",Ee=document.createElement("template");Ee.innerHTML=`\n  <style>\n    ${_e}\n    ${Ce}\n    ${ye}\n    ${ke}\n    \n    \n.miscellaneous__shape-filter{\n     display: inline-flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10px;\n}\n\n\n.miscellaneous__shape-filter-label {\n    align-items: center;\n    display: inline-flex;\n    gap: 15px;\n    justify-content: space-between\n}\n\n.miscellaneous__shape-filter-input {\n    max-width: 50px;\n\n    text-align: center;\n}\n\n.miscellaneous__shape-filter-button{ \n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n}\n\n  </style>\n  \n  \n <div class="miscellaneous__shape-filter">\n    <label class="miscellaneous__shape-filter-label" for="filter">\n    <span>Blur:</span>        \n        <input type="number" class="miscellaneous__shape-filter-input" name="value"\n            id="filter" value="0" min="0" />\n    </label>\n\n    <label class="miscellaneous__shape-filter-label" for="filter-unit">\n        <select name="unit" id="filter-unit">\n            <option value="">---</option>\n            <option value="%">Percentage (%)</option>\n            <option value="px">Pixels (px)</option>\n        </select>\n    </label>\n\n    <button type="button" class="miscellaneous__shape-filter-button">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"\n            class="no-pointer-events" fill="var(--out-of-range-color)">\n            <path\n                d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm3.21 11.79a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L12 13.41l-1.79 1.8a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.8-1.79-1.8-1.79a1 1 0 0 1 1.42-1.42l1.79 1.8 1.79-1.8a1 1 0 0 1 1.42 1.42L13.41 12Z">\n            </path>\n        </svg>\n    </button>\n</div>\n\n`;class Se extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"}),t=Ee.content.cloneNode(!0);e.appendChild(t),this.setValueToWebComponent=this.setValueToWebComponent.bind(this),this.setUnitToWebComponent=this.setUnitToWebComponent.bind(this),this.removeWebComponent=this.removeWebComponent.bind(this)}get filter(){return a("filter",this)}set filter(e){r(this,"filter",e)}get value(){return a("value",this)}set value(e){r(this,"value",e)}get unit(){return a("unit",this)}set unit(e){r(this,"unit",e)}static get observedAttributes(){return["filter","value","unit"]}setValueToWebComponent(e){const t=e.currentTarget;this.value=t.value}setUnitToWebComponent(e){const t=e.currentTarget;this.unit=t.value}removeWebComponent(e){this.remove()}connectedCallback(){const e=t("input[type=number]",this.shadowRoot),n=t("select",this.shadowRoot);e.addEventListener("input",this.setValueToWebComponent),n.addEventListener("input",this.setUnitToWebComponent);const s=t("button",this.shadowRoot);s.addEventListener("click",this.removeWebComponent),y(e,n,s);const o=`${this.filter}(${this.value}${this.unit})`;var i;i=o,d.filters.push(i),y("Added!")}disconnectedCallback(){const e=t("input[type=number]",this.shadowRoot),n=t("select",this.shadowRoot);e.removeEventListener("input",this.setValueToWebComponent),n.removeEventListener("input",this.setUnitToWebComponent);var s;t("button",this.shadowRoot).removeEventListener("click",this.removeWebComponent),s=this.filter,d.filters=d.filters.filter((e=>!e.includes(s))),y("Removed!")}attributeChangedCallback(e,n,s){this.shadowRoot;switch(e){case"filter":{const e=t("label>span",this.shadowRoot),n=Y(this.filter,"titlecase");e.textContent=n;const o=t("select",this.shadowRoot);if("invert"===s||"opacity"===s||"saturate"===s||"sepia"===s){t("option[value=px]",o).remove()}if("blur"===s){t('option[value="%"]',o).remove()}break}case"value":y("Value change");if(null===n)return;xe(this.filter,s,this.unit),y(d.filters);break;case"unit":y("Unit change");if(null===n)return;if("px"!==s&&"%"!==s)throw new Error(`Error: unexpected unit passed, not a percentage or a px value: ${s}`);xe(this.filter,this.value,s),y(d.filters);break}}}customElements.define("shape-filter",Se);const Ne=document.createElement("template");Ne.innerHTML=`\n  <style>\n    ${_e}\n    ${Ce}\n    ${ye}\n    ${ke}\n    \n    \n.miscellaneous__canvas-filter{\n     display: inline-flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10px;\n}\n\n\n.miscellaneous__canvas-filter-label {\n    align-items: center;\n    display: inline-flex;\n    gap: 15px;\n    justify-content: space-between\n}\n\n.miscellaneous__canvas-filter-input {\n    max-width: 50px;\n\n    text-align: center;\n}\n\n.miscellaneous__canvas-filter-button{ \n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n}\n\n  </style>\n  \n  \n <div class="miscellaneous__canvas-filter">\n    <label class="miscellaneous__canvas-filter-label" for="filter">\n    <span>Blur:</span>        \n        <input type="number" class="miscellaneous__canvas-filter-input" name="value"\n            id="filter" value="0" min="0" />\n    </label>\n\n    <label class="miscellaneous__canvas-filter-label" for="filter-unit">\n        <select name="unit" id="filter-unit">\n            <option value="">---</option>\n            <option value="%">Percentage (%)</option>\n            <option value="px">Pixels (px)</option>\n        </select>\n    </label>\n\n    <button type="button" class="miscellaneous__canvas-filter-button">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"\n            class="no-pointer-events" fill="var(--out-of-range-color)">\n            <path\n                d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm3.21 11.79a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L12 13.41l-1.79 1.8a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.8-1.79-1.8-1.79a1 1 0 0 1 1.42-1.42l1.79 1.8 1.79-1.8a1 1 0 0 1 1.42 1.42L13.41 12Z">\n            </path>\n        </svg>\n    </button>\n</div>\n\n`;class Le extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"}),t=Ne.content.cloneNode(!0);e.appendChild(t),this.removeWebComponent=this.removeWebComponent.bind(this)}get filter(){return a("filter",this)}set filter(e){r(this,"filter",e)}get value(){return a("value",this)}set value(e){r(this,"value",e)}get unit(){return a("unit",this)}set unit(e){r(this,"unit",e)}static get observedAttributes(){return["filter","value","unit"]}removeWebComponent(e){this.remove()}connectedCallback(){t("button",this.shadowRoot).addEventListener("click",this.removeWebComponent)}disconnectedCallback(){t("button",this.shadowRoot).removeEventListener("click",this.removeWebComponent)}attributeChangedCallback(e,n,s){this.shadowRoot;switch(e){case"filter":{const e=t("label>span",this.shadowRoot),n=Y(this.filter,"titlecase");e.textContent=n;const o=t("select",this.shadowRoot);if("invert"===s||"opacity"===s||"saturate"===s||"sepia"===s){t("option[value=px]",o).remove()}if("blur"===s){t('option[value="%"]',o).remove()}break}case"value":y("Value change");if(null===n)return;xe(this.filter,s,this.unit),y(d.filters);break;case"unit":y("Unit change");if(null===n)return;if("px"!==s&&"%"!==s)throw new Error(`Error: unexpected unit passed, not a percentage or a px value: ${s}`);xe(this.filter,this.value,s),y(d.filters);break}}}customElements.define("canvas-filter",Le);const Te=t("canvas.index__canvas"),We=ve(Te),Ae=t("canvas.shapes__canvas"),Oe=(ve(Ae),t("fieldset.tools")),Ie=(t("fieldset.colors"),t("fieldset.controls"),t("fieldset.shapes"));t("fieldset.miscellaneous");!function(){const n=e("tools__input",Oe);for(const e of n)e.addEventListener("change",oe);t(".tools__button").addEventListener("click",(()=>{var e,t,n;e=We,t=Te.width,n=Te.height,e.clearRect(0,0,t,n)}))}(),function(){const e=n(".color__input--checkbox:not(input#fill-show, input#stroke-show)");for(const t of e)t.addEventListener("change",Q);t(".colors__input--stroke-width").addEventListener("input",re)}(),function(){const t=e("controls__input--checkbox");for(const e of t)e.addEventListener("change",ce);const n=e("input--color");for(const e of n)e.addEventListener("input",de);const s=e("show-input");for(const e of s)e.addEventListener("change",fe);const o=e("controls__input--range");for(const e of o)e.addEventListener("input",ue);const i=e("controls__input--number");for(const e of i)e.addEventListener("input",re)}(),function(){const t=e("shapes__input--radio",Ie);for(const e of t)e.addEventListener("change",ie);const n=e("shapes__input--number",Ie);for(const e of n)e.addEventListener("input",ae)}(),function(){const e=t(".miscellaneous__select--canvas");y({select:e}),e.addEventListener("change",se);const n=t(".miscellaneous__select-multiple--shape");y({shapeSelectMultiple:n}),n.addEventListener("input",te);const s=t(".miscellaneous__select-multiple--canvas");y({canvasSelectMultiple:s}),s.addEventListener("input",ne)}(),Te.addEventListener("pointermove",g),Te.addEventListener("pointerdown",v),Te.addEventListener("pointerup",w),Te.addEventListener("pointercancel",(e=>{y("Cancel")})),window.addEventListener("resize",Me);let Re=0;function Me(){Te.width=Te.clientWidth,Te.height=Te.clientHeight,Ae.width=Ae.clientWidth,Ae.height=Ae.clientHeight}Me();let ze=new we(Te,d,p),Pe=new class extends we{constructor(e,{tool:t,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m}){super(e,{tool:t,fill:n,stroke:s,strokeWidth:o,size:15,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:e.width/2,y:e.width/2,isDrawing:!0}),this.canvas=e,this.context=ve(this.canvas)}updatePropertyValues({tool:e,fill:t,stroke:n,strokeWidth:s,size:o,angle:i,shadow:r,shadowBlur:a,shadowOffsetX:l,shadowOffsetY:c,hasEditableShape:h,shape:u,sides:d,innerRadius:f,globalCompositeOperation:p,filters:b}){this.tool=e,this.fill=t,this.stroke=n,this.strokeWidth=s,this.size=o,this.angle=i,this.context.shadowColor=r,this.context.shadowBlur=a,this.context.shadowOffsetX=l,this.context.shadowOffsetY=c,this.hasEditableShape=h,this.shape=u,this.sides=d,this.innerRadius=f,this.x=this.canvas.width/2,this.y=this.canvas.height/2,this.isDrawing=!0;const m=ge(b," "),g=!m.length;this.context.filter=g?"none":m}drawOnCanvas(){switch(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare();break;case"star":this.drawStar();break;case"polygon":this.drawPolygon()}}}(Ae,d);!function e(){ze.drawOnCanvas(),ze.updatePropertyValues(d,p),Pe.drawOnCanvas(),Pe.updatePropertyValues(d),Re=requestAnimationFrame(e)}()})()})();