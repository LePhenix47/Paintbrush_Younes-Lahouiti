(()=>{"use strict";(()=>{function t(t,e){return t.getContext("2d",e)}const{log:e,error:s,table:n,time:i,timeEnd:o,timeStamp:r,timeLog:a,assert:c,clear:l,count:h,countReset:u,group:d,groupCollapsed:f,groupEnd:p,trace:g,profile:b,profileEnd:m,warn:x,debug:w,info:v,dir:y,dirxml:k}=console;function N(t,e){var s;if(!e)return Array.from(document.getElementsByClassName(t));return(null===(s=null==e?void 0:e.tagName)||void 0===s?void 0:s.includes("-"))?Array.from(e.shadowRoot.getElementsByClassName(t)):Array.from(e.getElementsByClassName(t))}function E(t,e){var s;if(!e)return document.querySelector(t);return(null===(s=null==e?void 0:e.tagName)||void 0===s?void 0:s.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function S(t){return t.parentElement}function I(t,e){return t.closest(e)}function _(t,e){return e.getAttribute(t)}function A(t,e,s){t.removeAttribute(e),t.setAttribute(s,"")}function C(t){A(t,"disabled","enabled")}function L(t){A(t,"enabled","disabled")}const M={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:25,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"square",sides:5,innerRadius:30,globalCompositeOperation:"source-over"},z={x:NaN,y:NaN,isDrawing:!1},O={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},T={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function P(t){t.preventDefault();const e=E("canvas.index__canvas"),{x:s,y:n}=e.getBoundingClientRect();z.x=t.clientX-s,z.y=t.clientY-n}function W(t){e(t),t.preventDefault();const s="mouse"===t.pointerType&&0===t.button,n="touch"===t.pointerType;(s||n)&&(z.isDrawing=!0)}function R(t){e(t),t.preventDefault();const s="mouse"===t.pointerType&&0===t.button,n="touch"===t.pointerType;(s||n)&&(z.isDrawing=!1)}class q{constructor(){}static set(t,e,...s){return this.id=setInterval((()=>{e(...s)}),t),this.arrayOfIds.push(this.id),this.id}static clear(t){const e=this.arrayOfIds.find((e=>e===t));clearInterval(e),this.arrayOfIds=this.arrayOfIds.filter((t=>t!==e))}}function D(t){return Number(`0x${t}`)}function B(t){return t.toString(16)}function Y(t,e){switch(e.toLowerCase().trim()){case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();case"titlecase":{let e=t.split(" ");for(let t=0;t<e.length;t++){const s=e[t].substring(0,1).toUpperCase(),n=e[t].slice(1).toLowerCase();e[t]=s+n}return e=e.concat(),e.toString()}case"titlecase2":return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function V(t,e){return t.split(e)}function X(t,e,s){return t.substring(e,s)}function $(t){let e=V(t,"-");for(let t=1;t<e.length;t++)e[t]=Y(e[t],"titlecase");const s=e.join();return n=",",i="",s.replaceAll(n,i);var n,i}function F(t){if((null==t?void 0:t.length)<6||(null==t?void 0:t.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${t.length}`;let e=t;var s,n;"#"===t.charAt(0)&&(s=1,e=t.slice(s,n));let i=[X(e,0,2),X(e,2,4),X(e,4,6)];for(let t=0;t<i.length;t++){let e=i[t];i[t]=D(e)}return{red:Number(i[0]),green:Number(i[1]),blue:Number(i[2])}}function H(t,e,s){const n=t/255,i=e/255,o=s/255,r=Math.max(n,i,o),a=Math.min(n,i,o),c=r-a,l=(r+a)/2;let h,u;if(r===a)u=0,h=0;else switch(h=l>.5?c/(2-r-a):c/(r+a),r){case n:u=((i-o)/c+(i<o?6:0))/6;break;case i:u=((o-n)/c+2)/6;break;case o:u=((n-i)/c+4)/6}return{hue:Math.round(360*u),saturation:Math.round(100*h),lightness:Math.round(100*l)}}function U(t,e=100,s=50){if(t<0||t>360||e<0||e>100||s<0||s>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const n=t/360,i=e/100,o=s/100,r=(1-Math.abs(2*o-1))*i,a=6*n,c=r*(1-Math.abs(a%2-1));let l,h,u;[l,h,u]=a>=0&&a<1?[r,c,0]:a>=1&&a<2?[c,r,0]:a>=2&&a<3?[0,r,c]:a>=3&&a<4?[0,c,r]:a>=4&&a<5?[c,0,r]:[r,0,c];const d=o-r/2,f=Math.round(255*(l+d)),p=Math.round(255*(h+d)),g=Math.round(255*(u+d));return`#${B(f).padStart(2,"0")}${B(p).padStart(2,"0")}${B(g).padStart(2,"0")}`}function j(t,e,s){let n;e=e.toLowerCase(),s=s.toLowerCase();const i=e.includes("hex")&&s.includes("rgb"),o=e.includes("rgb")&&s.includes("hsl"),r=e.includes("hsl")&&s.includes("hex"),a=e.includes("hsl")&&s.includes("hwb"),c=e.includes("hsl")&&s.includes("rgb"),l=e.includes("rgb")&&s.includes("hex"),h=e.includes("hex")&&s.includes("hsl");if(i)n=F(t);else if(o)n=H(t.red,t.green,t.blue);else if(r)n=U(t.hue,t.saturation,t.lightness);else if(a)n=function(t,e=100,s=50){if(t<0||t>360||e<0||e>100||s<0||s>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const n=e/100,i=s/100,o=t/360,r=1-Math.max(n,i),a=1-Math.min(n,i);return{hue:Math.round(360*o),whiteness:Math.round(100*r),blackness:Math.round(100*a)}}(t.hue,t.saturation,t.lightness);else if(c){n=F(U(t.hue,t.saturation,t.lightness))}else if(l){const e=H(t.red,t.green,t.blue);n=U(e.hue,e.saturation,e.lightness)}else{if(!h)throw new Error("Color model conversion error: Unsupported color model conversion");{const e=F(t);n=H(e.red,e.green,e.blue)}}return n}function G(t){const e=t.currentTarget,s=I(e,".colors__container"),n=E(".colors__input",s),i=n.value,o=n.id,{hue:r,saturation:a,lightness:c}=j(i,"hex","hsl");if(ct(s)||(0===a||0===c||100===c))return;O[o].type=o,O[o].hue=r,O[o].saturation=a,O[o].lightness=c;e.checked?O[o].animationId=q.set(50,J,n,O[o]):q.clear(O[o].animationId)}function J(t,e){e.hue+=2,e.hue%=360;let s=j(e,"hsl","hex");s=Y(s,"uppercase");const n=S(t);t.value=s,lt(n,s),M[e.type]=s}function K(t){const e=t.currentTarget.value;M.globalCompositeOperation=e}function Q(t){const e=t.currentTarget;M.tool=e.id}function Z(t){const e=t.currentTarget,s=V(e.id,"-")[0];M.shape=s;const n="polygon"!==s&&"star"!==s;M.hasEditableShape=!n;const i=I(e,"fieldset"),o=E("input#shape-sides-amount",i),r=E("input#shape-star-inner-radius",i);!0===M.hasEditableShape?C(o):L(o);"star"===s?C(r):L(r)}function tt(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;st(e,0,Number.POSITIVE_INFINITY);const s=$(_("for",S(e)));M[s]=e.valueAsNumber}function et(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;st(e,Number(e.min),Number(e.max));switch($(_("for",S(e)))){case"shapeSidesAmount":M.sides=e.valueAsNumber;break;case"shapeStarInnerRadius":M.innerRadius=e.valueAsNumber}}function st(t,e=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY){const n=t.valueAsNumber;n>s&&(t.valueAsNumber=s);n<e&&(t.valueAsNumber=e)}function nt(t){const e=t.currentTarget,s=e.name;e.checked?T[s].id=q.set(10,it,e):q.clear(T[s].id)}function it(t){const e=t.name,s=I(t,".controls__brush-container"),n=E(".controls__input--range",s),i=n.valueAsNumber,o=Number(n.max),r=Number(n.min);i>=o&&(T[e].direction="backwards");i<=r&&(T[e].direction="forwards");const a="forwards"===T[e].direction;n.valueAsNumber=a?i+1:i-1;const c=`${n.valueAsNumber}`,l=n.name;M[l]=n.valueAsNumber,lt(s,c)}function ot(t){const e=t.currentTarget,s=e.valueAsNumber,n=S(e),i=e.name;M[i]=s,lt(n,s)}function rt(t){const e=t.currentTarget,s=Y(e.value,"uppercase"),n=S(e);lt(n,s);const i=E("div",S(n)),o=e.id,r=ct(i);M[o]=r?"transparent":s}function at(t){const e=t.currentTarget,s=V(e.id,"-")[0];if(e.checked){const t=Y(E("input[type=color]",S(I(e,"div"))).value,"uppercase");M[s]=t}else M[s]="transparent"}function ct(t){return!E("input[type=checkbox]",t).checked}function lt(t,e){E("span",t).textContent=e}q.arrayOfIds=[];const ht=E("canvas.index__canvas"),ut=t(ht),dt=E("fieldset.tools"),ft=(E("fieldset.colors"),E("fieldset.controls"),E("fieldset.shapes"));E("fieldset.miscellaneous");!function(){const t=N("tools__input",dt);for(const e of t)e.addEventListener("change",Q);E(".tools__button").addEventListener("click",(t=>{var e,s,n,i;s=ut,n=(e=ht).width,i=e.height,s.clearRect(0,0,n,i)}))}(),function(){const t=(e=".color__input--checkbox:not(input#fill-show, input#stroke-show)",s?s.tagName.includes("-")?Array.from(s.shadowRoot.querySelectorAll(e)):Array.from(s.querySelectorAll(e)):Array.from(document.querySelectorAll(e)));var e,s;for(const e of t)e.addEventListener("change",G);E(".colors__input--stroke-width").addEventListener("input",tt)}(),function(){const t=N("controls__input--checkbox");for(const e of t)e.addEventListener("change",nt);const e=N("input--color");for(const t of e)t.addEventListener("input",rt);const s=N("show-input");for(const t of s)t.addEventListener("change",at);const n=N("controls__input--range");for(const t of n)t.addEventListener("input",ot);const i=N("controls__input--number");for(const t of i)t.addEventListener("input",tt)}(),function(){const t=N("shapes__input--radio",ft);for(const e of t)e.addEventListener("change",Z);const e=N("shapes__input--number",ft);for(const t of e)t.addEventListener("input",et)}(),E(".miscellaneous__select").addEventListener("change",K),ht.addEventListener("pointermove",P),ht.addEventListener("pointerdown",W),ht.addEventListener("pointerup",R),ht.addEventListener("pointercancel",(t=>{e("Cancel")})),window.addEventListener("resize",gt);let pt=0;function gt(){ht.width=ht.clientWidth,ht.height=ht.clientHeight}gt();let bt=new class{constructor(s,{tool:n,fill:i,stroke:o,strokeWidth:r,size:a,angle:c,shadow:l,shadowBlur:h,shadowOffsetX:u,shadowOffsetY:d,hasEditableShape:f,shape:p,sides:g,innerRadius:b,globalCompositeOperation:m},{x,y:w,isDrawing:v}){this.canvas=s,this.context=t(this.canvas),this.updatePropertyValues({tool:n,fill:i,stroke:o,strokeWidth:r,size:a,angle:c,shadow:l,shadowBlur:h,shadowOffsetX:u,shadowOffsetY:d,hasEditableShape:f,shape:p,sides:g,innerRadius:b,globalCompositeOperation:m},{x,y:w,isDrawing:v}),e(this)}updatePropertyValues({tool:t,fill:e,stroke:s,strokeWidth:n,size:i,angle:o,shadow:r,shadowBlur:a,shadowOffsetX:c,shadowOffsetY:l,hasEditableShape:h,shape:u,sides:d,innerRadius:f,globalCompositeOperation:p},{x:g,y:b,isDrawing:m}){this.tool=t,this.fill=e,this.stroke=s,this.strokeWidth=n,this.size=i,this.angle=o,this.context.shadowColor=r,this.context.shadowBlur=a,this.context.shadowOffsetX=c,this.context.shadowOffsetY=l,this.hasEditableShape=h,this.shape=u,this.sides=d,this.innerRadius=f,this.context.globalCompositeOperation=p,this.x=g,this.y=b,this.isDrawing=m}drawOnCanvas(){if(!this.isDrawing)return;if("eraser"===this.tool)this.erase();else switch(this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare();break;case"star":this.drawStar();break;case"polygon":this.drawPolygon()}}drawCircle(){this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.beginPath(),this.context.arc(this.x,this.y,this.size,0,2*Math.PI),this.context.fill();this.strokeWidth>0&&this.context.stroke()}drawSquare(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.fillRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth;this.strokeWidth>0&&this.context.strokeRect(-this.size,-this.size,2*this.size,2*this.size),this.context.restore()}erase(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.clearRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.restore()}drawPolygon(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let t=1;t<this.sides;t++){const e=t*Math.PI*2/this.sides,s=this.size*Math.cos(e),n=this.size*Math.sin(e);this.context.lineTo(s,n)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}drawStar(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let t=1;t<2*this.sides;t++){const e=t%2==0?this.size:this.innerRadius,s=t*Math.PI/this.sides,n=e*Math.cos(s),i=e*Math.sin(s);this.context.lineTo(n,i)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}}(ht,M,z);!function t(){bt.drawOnCanvas(),bt.updatePropertyValues(M,z),pt=requestAnimationFrame(t)}(),q.set(3500,(()=>{f("Tracker"),e(bt),p()}))})()})();