(()=>{"use strict";(()=>{function t(t,e){var n;if(!e)return Array.from(document.getElementsByClassName(t));return(null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(e.shadowRoot.getElementsByClassName(t)):Array.from(e.getElementsByClassName(t))}function e(t,e){var n;if(!e)return document.querySelector(t);return(null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function n(t,e){if(!e)return Array.from(document.querySelectorAll(t));return e.tagName.includes("-")?Array.from(e.shadowRoot.querySelectorAll(t)):Array.from(e.querySelectorAll(t))}function s(t){return t.parentElement}function o(t,e){return t.closest(e)}function i(t,e){return e.appendChild(t)}function r(t,e,n){t.setAttribute(e,n.toString())}function a(t,e){return e.getAttribute(t)}function l(t,e,n){t.removeAttribute(e),t.setAttribute(n,"")}function c(t){l(t,"disabled","enabled")}function h(t){l(t,"enabled","disabled")}const u={tool:"pen",fill:"#000000",stroke:"transparent",strokeWidth:0,size:25,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"square",sides:5,innerRadius:45,globalCompositeOperation:"source-over",filters:[]},d={x:NaN,y:NaN,isDrawing:!1},f={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},p={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function b(t){t.preventDefault();const n=e("canvas.index__canvas"),{x:s,y:o}=n.getBoundingClientRect();d.x=t.clientX-s,d.y=t.clientY-o}function m(t){t.preventDefault();const e="mouse"===t.pointerType&&0===t.button,n="touch"===t.pointerType;(e||n)&&(d.isDrawing=!0)}function g(t){t.preventDefault();const e="mouse"===t.pointerType&&0===t.button,n="touch"===t.pointerType;(e||n)&&(d.isDrawing=!1)}class v{constructor(){}static set(t,e,...n){return this.id=setInterval((()=>{e(...n)}),t),this.arrayOfIds.push(this.id),this.id}static clear(t){const e=this.arrayOfIds.find((e=>e===t));clearInterval(e),this.arrayOfIds=this.arrayOfIds.filter((t=>t!==e))}}v.arrayOfIds=[];const{log:w,error:x,table:y,time:k,timeEnd:C,timeStamp:E,timeLog:_,assert:S,clear:N,count:O,countReset:T,group:A,groupCollapsed:I,groupEnd:W,trace:L,profile:R,profileEnd:z,warn:M,debug:P,info:B,dir:q,dirxml:D}=console;function V(t){return Number(`0x${t}`)}function U(t){return t.toString(16)}function Y(t,e){switch(e.toLowerCase().trim()){case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();case"titlecase":{let e=t.split(" ");for(let t=0;t<e.length;t++){const n=e[t].substring(0,1).toUpperCase(),s=e[t].slice(1).toLowerCase();e[t]=n+s}return e=e.concat(),e.toString()}case"titlecase2":return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function H(t,e){return t.split(e)}function $(t,e,n){return t.substring(e,n)}function X(t){let e=H(t,"-");for(let t=1;t<e.length;t++)e[t]=Y(e[t],"titlecase");const n=e.join();return s=",",o="",n.replaceAll(s,o);var s,o}function F(t){if((null==t?void 0:t.length)<6||(null==t?void 0:t.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${t.length}`;let e=t;var n,s;"#"===t.charAt(0)&&(n=1,e=t.slice(n,s));let o=[$(e,0,2),$(e,2,4),$(e,4,6)];for(let t=0;t<o.length;t++){let e=o[t];o[t]=V(e)}return{red:Number(o[0]),green:Number(o[1]),blue:Number(o[2])}}function j(t,e,n){const s=t/255,o=e/255,i=n/255,r=Math.max(s,o,i),a=Math.min(s,o,i),l=r-a,c=(r+a)/2;let h,u;if(r===a)u=0,h=0;else switch(h=c>.5?l/(2-r-a):l/(r+a),r){case s:u=((o-i)/l+(o<i?6:0))/6;break;case o:u=((i-s)/l+2)/6;break;case i:u=((s-o)/l+4)/6}return{hue:Math.round(360*u),saturation:Math.round(100*h),lightness:Math.round(100*c)}}function G(t,e=100,n=50){if(t<0||t>360||e<0||e>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=t/360,o=e/100,i=n/100,r=(1-Math.abs(2*i-1))*o,a=6*s,l=r*(1-Math.abs(a%2-1));let c,h,u;[c,h,u]=a>=0&&a<1?[r,l,0]:a>=1&&a<2?[l,r,0]:a>=2&&a<3?[0,r,l]:a>=3&&a<4?[0,l,r]:a>=4&&a<5?[l,0,r]:[r,0,l];const d=i-r/2,f=Math.round(255*(c+d)),p=Math.round(255*(h+d)),b=Math.round(255*(u+d));return`#${U(f).padStart(2,"0")}${U(p).padStart(2,"0")}${U(b).padStart(2,"0")}`}function Z(t,e,n){let s;e=e.toLowerCase(),n=n.toLowerCase();const o=e.includes("hex")&&n.includes("rgb"),i=e.includes("rgb")&&n.includes("hsl"),r=e.includes("hsl")&&n.includes("hex"),a=e.includes("hsl")&&n.includes("hwb"),l=e.includes("hsl")&&n.includes("rgb"),c=e.includes("rgb")&&n.includes("hex"),h=e.includes("hex")&&n.includes("hsl");if(o)s=F(t);else if(i)s=j(t.red,t.green,t.blue);else if(r)s=G(t.hue,t.saturation,t.lightness);else if(a)s=function(t,e=100,n=50){if(t<0||t>360||e<0||e>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=e/100,o=n/100,i=t/360,r=1-Math.max(s,o),a=1-Math.min(s,o);return{hue:Math.round(360*i),whiteness:Math.round(100*r),blackness:Math.round(100*a)}}(t.hue,t.saturation,t.lightness);else if(l){s=F(G(t.hue,t.saturation,t.lightness))}else if(c){const e=j(t.red,t.green,t.blue);s=G(e.hue,e.saturation,e.lightness)}else{if(!h)throw new Error("Color model conversion error: Unsupported wanted color model");{const e=F(t);s=j(e.red,e.green,e.blue)}}return s}function J(t){const n=t.currentTarget,s=o(n,".colors__container"),i=e(".colors__input",s),r=i.value,a=i.id,{hue:l,saturation:c,lightness:h}=Z(r,"hex","hsl"),u=ut(s);if(w("Before",{mustBeTransparent:u}),u)return void v.clear(f[a].animationId);w("After IF condition",{mustBeTransparent:u});if(0===c||0===h||100===h)return void v.clear(f[a].animationId);f[a].type=a,f[a].hue=l,f[a].saturation=c,f[a].lightness=h;n.checked?f[a].animationId=v.set(50,K,i,f[a]):v.clear(f[a].animationId)}function K(t,e){e.hue+=2,e.hue%=360;let n=Z(e,"hsl","hex");n=Y(n,"uppercase");const o=s(t);t.value=n,dt(o,n),u[e.type]=n}function Q(t){const n=t.currentTarget,s=function(t,e=!1){if("SELECT"!==t.tagName)throw"Error: Elmeent passed in argument is not a <select multiple>";let n=Array.from(t.selectedOptions);return e&&(n=n.map((t=>t.value))),n}(n,!0),a=o(n,"section");w(a);const l=e(".miscellaneous__active-filter-container",a);for(const t of s){if(!u.filters.includes(t)){const e=document.createElement("active-filter");r(e,"filter",t),r(e,"value",0),r(e,"unit","%"),i(e,l)}}w(s)}function tt(t){const e=t.currentTarget.value;u.globalCompositeOperation=e}function et(t){const e=t.currentTarget;u.tool=e.id,w("change",u.tool)}function nt(t){const n=t.currentTarget,s=H(n.id,"-")[0];u.shape=s;const i="polygon"!==s&&"star"!==s;u.hasEditableShape=!i;const r=o(n,"fieldset"),a=e("input#shape-sides-amount",r),l=e("input#shape-star-inner-radius",r);!0===u.hasEditableShape?c(a):h(a);"star"===s?c(l):h(l)}function st(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;it(e,0,Number.POSITIVE_INFINITY);const n=X(a("for",s(e)));u[n]=e.valueAsNumber}function ot(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;it(e,Number(e.min),Number(e.max));switch(X(a("for",s(e)))){case"shapeSidesAmount":u.sides=e.valueAsNumber;break;case"shapeStarInnerRadius":u.innerRadius=e.valueAsNumber}}function it(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const s=t.valueAsNumber;s>n&&(t.valueAsNumber=n);s<e&&(t.valueAsNumber=e)}function rt(t){const e=t.currentTarget,n=e.name;e.checked?p[n].id=v.set(10,at,e):v.clear(p[n].id)}function at(t){const n=t.name,s=o(t,".controls__brush-container"),i=e(".controls__input--range",s),r=i.valueAsNumber,a=Number(i.max),l=Number(i.min);switch(n){case"size":{r>=a&&(p[n].direction="backwards");r<=l&&(p[n].direction="forwards");const t="forwards"===p[n].direction;i.valueAsNumber=t?r+1:r-1;break}case"rotation":{const t=r>=a;i.valueAsNumber=r+1,t&&(i.valueAsNumber=l);break}}const c=`${i.valueAsNumber}`,h=i.name;u[h]=i.valueAsNumber,dt(s,c)}function lt(t){const e=t.currentTarget,n=e.valueAsNumber,o=s(e),i=e.name;u[i]=n,dt(o,n)}function ct(t){const n=t.currentTarget,o=Y(n.value,"uppercase"),i=s(n);dt(i,o);const r=e("div",s(i)),a=n.id,l=ut(r);u[a]=l?"transparent":o}function ht(t){const i=t.currentTarget,r=H(i.id,"-")[0],a=s(o(i,"div"));if(i.checked){const t=Y(e("input[type=color]",a).value,"uppercase");u[r]=t}else{const t=n("input[type=checkbox]",a)[1];!0===(null==t?void 0:t.checked)&&(t.checked=!1),u[r]="transparent"}w(u)}function ut(t){return!e("input[type=checkbox]",t).checked}function dt(t,n){e("span",t).textContent=n}function ft(t,e,n,...s){let o=(i=t,Array.from(i));var i;let r=[];return r=!!s.length?o.splice(e,n,...s):o.splice(e,n),{removedItems:r,newArray:o}}function pt(t,e=""){return t.join(e)}function bt(t,e){return t.getContext("2d",e)}class mt{constructor(t,{tool:e,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:g,y:v,isDrawing:w}){this.canvas=t,this.context=bt(this.canvas),this.updatePropertyValues({tool:e,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:g,y:v,isDrawing:w})}updatePropertyValues({tool:t,fill:e,stroke:n,strokeWidth:s,size:o,angle:i,shadow:r,shadowBlur:a,shadowOffsetX:l,shadowOffsetY:c,hasEditableShape:h,shape:u,sides:d,innerRadius:f,globalCompositeOperation:p,filters:b},{x:m,y:g,isDrawing:v}){this.tool=t,this.fill=e,this.stroke=n,this.strokeWidth=s,this.size=o,this.angle=i,this.context.shadowColor=r,this.context.shadowBlur=a,this.context.shadowOffsetX=l,this.context.shadowOffsetY=c,this.hasEditableShape=h,this.shape=u,this.sides=d,this.innerRadius=f,this.context.globalCompositeOperation=p;const x=pt(b," ");!x.length?this.context.filter="none":(w(x),this.context.filter=x),this.x=m,this.y=g,this.isDrawing=v}drawOnCanvas(){if(!this.isDrawing)return;if("eraser"===this.tool)return void this.erase();if("pen"===this.tool)switch(this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare();break;case"star":this.drawStar();break;case"polygon":this.drawPolygon()}}drawCircle(){this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.beginPath(),this.context.arc(this.x,this.y,this.size,0,2*Math.PI),this.context.fill();this.strokeWidth>0&&this.context.stroke()}drawSquare(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.fillRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth;this.strokeWidth>0&&this.context.strokeRect(-this.size,-this.size,2*this.size,2*this.size),this.context.restore()}erase(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.fillStyle=this.fill,this.context.clearRect(-this.size,-this.size,2*this.size,2*this.size),this.context.fill(),this.context.restore()}drawPolygon(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let t=1;t<this.sides;t++){const e=t*Math.PI*2/this.sides,n=this.size*Math.cos(e),s=this.size*Math.sin(e);this.context.lineTo(n,s)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}drawStar(){this.context.save(),this.context.fillStyle=this.fill,this.context.strokeStyle=this.stroke,this.context.lineWidth=this.strokeWidth,this.context.translate(this.x,this.y),this.context.rotate(this.angle*Math.PI/180),this.context.beginPath(),this.context.moveTo(this.size,0);for(let t=1;t<2*this.sides;t++){const e=t%2==0?this.size:this.innerRadius,n=t*Math.PI/this.sides,s=e*Math.cos(n),o=e*Math.sin(n);this.context.lineTo(s,o)}this.context.closePath(),this.context.fill();this.strokeWidth>0&&this.context.stroke(),this.context.restore()}}function gt(t,e,n){const s=`${t}(${e}${n})`;w("Filter to change:",t,e,n);let o=u.filters.find(((e,n)=>{if(e.includes(t))return w("Found, index:",n),n}));if(o<0)return;const{newArray:i}=ft(u.filters,o,1,s);u.filters=i}const vt=document.createElement("template");vt.innerHTML='\n  <style>\n    \n:host {\n    --bg-primary: hwb(0 100% 0%);\n    --bg-secondary: #f0efef;\n    --bg-tertiary: #676767;\n    --bg-radio-button: #48c848;\n    --bg-canvas: #fff;\n    --color-primary: #000;\n    --color-secondary: gray;\n    --semi-transparent-bg: hsla(0, 0%, 100%, .7);\n    --border-color: #dbdbdb;\n    --scrollbar-track-bg-color: #fff;\n    --scrollbar-thumb-bg-color: #545454;\n    --scrollbar-thumb-bg-color--hover: #757575;\n    --scrollbar-thumb-bg-color--active: #b0b0b0;\n    --selection-bg-color: hwb(240 0% 0%);\n    --selection-color: #fff;\n    --out-of-range-bg: #fdd;\n    --out-of-range-color: #ff441b;\n    --fill-color: #000;\n    --stroke-color: transparent\n}\n\n::backdrop {\n    --backdrop-bg-color: hsla(0, 0%, 100%, .5);\n    --scrollbar-track-bg-color: #fff;\n    --scrollbar-thumb-bg-color: #545454;\n    --scrollbar-thumb-bg-color--hover: #757575;\n    --scrollbar-thumb-bg-color--active: #b0b0b0}\n\n    \n\n@media(prefers-color-scheme:dark) {\n    :host {\n        --bg-primary: #000;\n        --bg-secondary: #232323;\n        --bg-tertiary: #7a7a7a;\n        --bg-radio-button: green;\n        --color-primary: #fff;\n        --semi-transparent-bg: rgba(0, 0, 0, .7);\n        --bg-canvas: #505050;\n        --scrollbar-track-bg-color: #000;\n        --scrollbar-thumb-bg-color: #ababab;\n        --scrollbar-thumb-bg-color--hover: #8a8a8a;\n        --scrollbar-thumb-bg-color--active: #4f4f4f;\n        --selection-bg: #838383;\n        --selection-color: #fff;\n        --selection-bg-color: orange;\n        --selection-color: #000;\n        --out-of-range-bg: #290000;\n        --out-of-range-color: #eb3941\n    }\n\n    ::backdrop {\n        --backdrop-bg-color: rgba(0, 0, 0, .5);\n        --scrollbar-track-bg-color: #000;\n        --scrollbar-thumb-bg-color: #ababab;\n        --scrollbar-thumb-bg-color--hover: #8a8a8a;\n        --scrollbar-thumb-bg-color--active: #4f4f4f\n    }\n}\n\n    \n@media (prefers-reduced-motion: reduce) {\n\n    *,\n    :before,\n    ::after {\n        -webkit-animation: none !important;\n        animation: none !important;\n\n        transition: none !important;\n    }\n}\n\n/* Reset */\n*,\n::before,\n::after {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\n\n*::selection {\n    -webkit-text-stroke: transparent;\n\n    color: var(--selection-color);\n\n    background-color: var(--selection-bg-color);\n}\n\nhtml {\n    scroll-behavior: smooth;\n    scroll-padding-top: 0%;\n    scroll-snap-type: y proximity;\n\n    color-scheme: dark light;\n}\n\n@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;500;700&display=swap);\n\nbody {\n    min-height: 100vh;\n\n    font-family: Roboto, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Cantarell, Open Sans, Helvetica Neue, sans-serif;\n\n    background-color: var(--bg-primary);\n    color: var(--color-primary);\n\n\n    overflow-x: hidden;\n\n    transition:\n        background-color 650ms ease-in-out,\n        color 350ms ease-in-out;\n\n}\n\n:is(ul, ol) {\n    list-style-type: none;\n}\n\n/*\n//⚠ We make the border transparent so that if the user has a high contrast text mode enable the border will still appear for them\n//Good for accessibility\n*/\nbutton {\n    border-color: transparent;\n    background-color: transparent;\n\n    font-family: inherit;\n    color: inherit;\n\n\n    &:hover {\n        cursor: pointer;\n\n        &:disabled {\n            cursor: not-allowed;\n        }\n    }\n\n}\n\n\ninput {\n    font-family: inherit;\n\n\n    border-color: transparent;\n    outline-color: transparent;\n\n    &:hover {\n        cursor: pointer;\n    }\n\n    &:focus {\n        border-color: transparent;\n        outline: transparent;\n    }\n\n    &:disabled {\n        cursor: not-allowed;\n    }\n}\n\n\ntextarea {\n    font-family: inherit;\n    border-color: transparent;\n\n    &:focus {\n        border-color: transparent;\n        outline: transparent;\n    }\n}\n\na {\n    text-decoration: none;\n    color: inherit;\n\n    &:visited {\n        color: currentColor;\n    }\n}\n\nlabel {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\nfieldset {\n    border-color: transparent;\n}\n\nlegend {\n    position: static;\n}\n\ndialog {\n    position: fixed;\n    border: transparent;\n    margin: 0;\n    padding: 0;\n    z-index: 0;\n    @include absolute-center;\n}\n\nselect {\n    border: transparent;\n    font-family: inherit;\n\n    &:hover {\n        cursor: pointer;\n    }\n}\n\noption {\n    font-family: inherit;\n}\n\n\n:is(p, h1, h2, h3, h4,\n    h5, h6, span):empty {\n    display: none !important;}\n\n    \n/* \n    Hides the element and all its descendants from view\n */\n.hide {\n    display: none !important;\n}\n\n/* \n    Hides the element from view except for screen readers \n    \n    - Good for accessibilty and by consequence SEO\n*/\n.screen-readers-only {\n    /*    \n    Positions the element off the screen \n    */ \n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n\n    /*    \n    Sets the dimensions of the element to 1×1 px \n    */ \n    height: 1px;\n    width: 1px;\n\n    /*    \n    Hides any content that overflows the element \n    */ \n    overflow: hidden;\n\n    /*    \n    Positions the element absolutely \n    */ \n    position: absolute;\n\n    /*    \n    Prevents line breaks in the element \n    */ \n    white-space: nowrap;\n}\n\n/* \n    Disables pointer (click on desktop and tap on mobile) events for the element and its descendants \n*/\n.no-pointer-events {\n    pointer-events: none;\n}\n\n\n    \n    \n.miscellaneous__active-filter{\n     display: inline-flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10px;\n}\n\n\n.miscellaneous__active-filter-label {\n    align-items: center;\n    display: inline-flex;\n    gap: 15px;\n    justify-content: space-between\n}\n\n.miscellaneous__active-filter-input {\n    max-width: 50px;\n\n    text-align: center;\n}\n\n.miscellaneous__active-filter-button{ \n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n}\n\n  </style>\n  \n  \n <div class="miscellaneous__active-filter">\n    <label class="miscellaneous__active-filter-label" for="filter">\n    <span>Blur:</span>        \n        <input type="number" class="miscellaneous__active-filter-input" name="value"\n            id="filter" value="0" min="0" />\n    </label>\n\n    <label class="miscellaneous__active-filter-label" for="filter-unit">\n        <select name="unit" id="filter-unit">\n            <option value="%">Percentage (%)</option>\n            <option value="px">Pixels (px)</option>\n        </select>\n    </label>\n\n    <button type="button" class="miscellaneous__active-filter-button">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"\n            class="no-pointer-events" fill="var(--out-of-range-color)">\n            <path\n                d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm3.21 11.79a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L12 13.41l-1.79 1.8a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.8-1.79-1.8-1.79a1 1 0 0 1 1.42-1.42l1.79 1.8 1.79-1.8a1 1 0 0 1 1.42 1.42L13.41 12Z">\n            </path>\n        </svg>\n    </button>\n</div>\n\n';class wt extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=vt.content.cloneNode(!0);t.appendChild(e),this.setValueToWebComponent=this.setValueToWebComponent.bind(this),this.setUnitToWebComponent=this.setUnitToWebComponent.bind(this),this.removeWebComponent=this.removeWebComponent.bind(this)}get filter(){return a("filter",this)}set filter(t){r(this,"filter",t)}get value(){return a("value",this)}set value(t){r(this,"value",t)}get unit(){return a("unit",this)}set unit(t){r(this,"unit",t)}static get observedAttributes(){return["filter","value","unit"]}setValueToWebComponent(t){const e=t.currentTarget;this.value=e.value}setUnitToWebComponent(t){const e=t.currentTarget;this.unit=e.value}removeWebComponent(t){this.remove()}connectedCallback(){const t=e("input[type=number]",this.shadowRoot),n=e("select",this.shadowRoot);t.addEventListener("input",this.setValueToWebComponent),n.addEventListener("input",this.setUnitToWebComponent);const s=e("button",this.shadowRoot);s.addEventListener("click",this.removeWebComponent),w(t,n,s);const o=`${this.filter}(${this.value}${this.unit})`;var i;i=o,u.filters.push(i),w("Added!")}disconnectedCallback(){const t=e("input[type=number]",this.shadowRoot),n=e("select",this.shadowRoot);t.removeEventListener("input",this.setValueToWebComponent),n.removeEventListener("input",this.setUnitToWebComponent);var s;e("button",this.shadowRoot).removeEventListener("click",this.removeWebComponent),s=this.filter,u.filters=u.filters.filter((t=>!t.includes(s))),w("Removed!")}attributeChangedCallback(t,n,s){this.shadowRoot;switch(t){case"filter":{const t=e("label>span",this.shadowRoot),n=Y(this.filter,"titlecase");t.textContent=n;break}case"value":w("Value change");if(null===n)return;gt(this.filter,s,this.unit);break;case"unit":w("Unit change");if(null===n)return;gt(this.filter,this.value,s);break}}}customElements.define("active-filter",wt);const xt=e("canvas.index__canvas"),yt=bt(xt),kt=e("canvas.shapes__canvas"),Ct=(bt(kt),e("fieldset.tools")),Et=(e("fieldset.colors"),e("fieldset.controls"),e("fieldset.shapes"));e("fieldset.miscellaneous");!function(){const n=t("tools__input",Ct);for(const t of n)t.addEventListener("change",et);e(".tools__button").addEventListener("click",(()=>{var t,e,n;t=yt,e=xt.width,n=xt.height,t.clearRect(0,0,e,n)}))}(),function(){const t=n(".color__input--checkbox:not(input#fill-show, input#stroke-show)");for(const e of t)e.addEventListener("change",J);e(".colors__input--stroke-width").addEventListener("input",st)}(),function(){const e=t("controls__input--checkbox");for(const t of e)t.addEventListener("change",rt);const n=t("input--color");for(const t of n)t.addEventListener("input",ct);const s=t("show-input");for(const t of s)t.addEventListener("change",ht);const o=t("controls__input--range");for(const t of o)t.addEventListener("input",lt);const i=t("controls__input--number");for(const t of i)t.addEventListener("input",st)}(),function(){const e=t("shapes__input--radio",Et);for(const t of e)t.addEventListener("change",nt);const n=t("shapes__input--number",Et);for(const t of n)t.addEventListener("input",ot)}(),e(".miscellaneous__select").addEventListener("change",tt),e("select[multiple]").addEventListener("input",Q),xt.addEventListener("pointermove",b),xt.addEventListener("pointerdown",m),xt.addEventListener("pointerup",g),xt.addEventListener("pointercancel",(t=>{w("Cancel")})),window.addEventListener("resize",St);let _t=0;function St(){xt.width=xt.clientWidth,xt.height=xt.clientHeight,kt.width=kt.clientWidth,kt.height=kt.clientHeight}St();let Nt=new mt(xt,u,d),Ot=new class extends mt{constructor(t,{tool:e,fill:n,stroke:s,strokeWidth:o,size:i,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m}){super(t,{tool:e,fill:n,stroke:s,strokeWidth:o,size:15,angle:r,shadow:a,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:u,shape:d,sides:f,innerRadius:p,globalCompositeOperation:b,filters:m},{x:t.width/2,y:t.width/2,isDrawing:!0}),this.canvas=t,this.context=bt(this.canvas)}updatePropertyValues({tool:t,fill:e,stroke:n,strokeWidth:s,size:o,angle:i,shadow:r,shadowBlur:a,shadowOffsetX:l,shadowOffsetY:c,hasEditableShape:h,shape:u,sides:d,innerRadius:f,globalCompositeOperation:p,filters:b}){this.tool=t,this.fill=e,this.stroke=n,this.strokeWidth=s,this.size=o,this.angle=i,this.context.shadowColor=r,this.context.shadowBlur=a,this.context.shadowOffsetX=l,this.context.shadowOffsetY=c,this.hasEditableShape=h,this.shape=u,this.sides=d,this.innerRadius=f,this.x=this.canvas.width/2,this.y=this.canvas.height/2,this.isDrawing=!0;const m=pt(b," "),g=!m.length;this.context.filter=g?"none":m}drawOnCanvas(){switch(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare();break;case"star":this.drawStar();break;case"polygon":this.drawPolygon()}}}(kt,u);!function t(){Nt.drawOnCanvas(),Nt.updatePropertyValues(u,d),Ot.drawOnCanvas(),Ot.updatePropertyValues(u),_t=requestAnimationFrame(t)}(),v.set(1e3,(()=>{w(u.filters)}))})()})();