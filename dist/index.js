(()=>{"use strict";(()=>{const e={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,isDrawing:!1,shadow:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},t={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},n={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};class r{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}r.arrayOfIds=[];const{log:s,error:o,table:a,time:i,timeEnd:u,timeStamp:c,timeLog:l,assert:d,clear:h,count:f,countReset:m,group:p,groupCollapsed:b,groupEnd:g,trace:v,profile:w,profileEnd:N,warn:_,debug:A,info:E,dir:I,dirxml:y}=console;function S(e){return Number(`0x${e}`)}function x(e){return e.toString(16)}function L(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),r=t[e].slice(1).toLowerCase();t[e]=n+r}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function k(e,t){return e.split(t)}function C(e,t,n){return e.substring(t,n)}function M(e){let t=k(e,"-");for(let e=1;e<t.length;e++)t[e]=L(t[e],"titlecase");const n=t.join();return r=",",s="",n.replaceAll(r,s);var r,s}function T(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,r;"#"===e.charAt(0)&&(n=1,t=e.slice(n,r));let s=[C(t,0,2),C(t,2,4),C(t,4,6)];for(let e=0;e<s.length;e++){let t=s[e];s[e]=S(t)}return{red:Number(s[0]),green:Number(s[1]),blue:Number(s[2])}}function O(e,t,n){const r=e/255,s=t/255,o=n/255,a=Math.max(r,s,o),i=Math.min(r,s,o),u=a-i,c=(a+i)/2;let l,d;if(a===i)d=0,l=0;else switch(l=c>.5?u/(2-a-i):u/(a+i),a){case r:d=((s-o)/u+(s<o?6:0))/6;break;case s:d=((o-r)/u+2)/6;break;case o:d=((r-s)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*c)}}function R(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=e/360,s=t/100,o=n/100,a=(1-Math.abs(2*o-1))*s,i=6*r,u=a*(1-Math.abs(i%2-1));let c,l,d;[c,l,d]=i>=0&&i<1?[a,u,0]:i>=1&&i<2?[u,a,0]:i>=2&&i<3?[0,a,u]:i>=3&&i<4?[0,u,a]:i>=4&&i<5?[u,0,a]:[a,0,u];const h=o-a/2,f=Math.round(255*(c+h)),m=Math.round(255*(l+h)),p=Math.round(255*(d+h));return`#${x(f).padStart(2,"0")}${x(m).padStart(2,"0")}${x(p).padStart(2,"0")}`}function q(e,t,n){let r;t=t.toLowerCase(),n=n.toLowerCase();const s=t.includes("hex")&&n.includes("rgb"),o=t.includes("rgb")&&n.includes("hsl"),a=t.includes("hsl")&&n.includes("hex"),i=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),l=t.includes("hex")&&n.includes("hsl");if(s)r=T(e);else if(o)r=O(e.red,e.green,e.blue);else if(a)r=R(e.hue,e.saturation,e.lightness);else if(i)r=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=t/100,s=n/100,o=e/360,a=1-Math.max(r,s),i=1-Math.min(r,s);return{hue:Math.round(360*o),whiteness:Math.round(100*a),blackness:Math.round(100*i)}}(e.hue,e.saturation,e.lightness);else if(u){r=T(R(e.hue,e.saturation,e.lightness))}else if(c){const t=O(e.red,e.green,e.blue);r=R(t.hue,t.saturation,t.lightness)}else{if(!l)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=T(e);r=O(t.red,t.green,t.blue)}}return r}function $(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function U(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function B(e){return e.parentElement}function F(e,t){return e.closest(t)}function H(e,t){return t.getAttribute(e)}function Y(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function V(e){Y(e,"disabled","enabled")}function z(e){Y(e,"enabled","disabled")}function P(e){const n=e.currentTarget,s=F(n,".colors__container"),o=U(".colors__input",s),a=o.value,i=o.id,{hue:u,saturation:c,lightness:l}=q(a,"hex","hsl");if(ne(s)||(0===c||0===l||100===l))return;t[i].type=i,t[i].hue=u,t[i].saturation=c,t[i].lightness=l;n.checked?t[i].animationId=r.set(50,j,o,t[i]):r.clear(t[i].animationId)}function j(t,n){n.hue+=2,n.hue%=360;let r=q(n,"hsl","hex");r=L(r,"uppercase");const o=B(t);t.value=r,re(o,r),e[n.type]=r,s(e)}function D(t){const n=t.currentTarget.value;e.globalCompositeOperation=n,s(e)}function G(t){const n=t.currentTarget;e.tool=n.id,s(e)}function W(t){const n=t.currentTarget,r=k(n.id,"-")[0];e.shape=r;const o="polygon"!==r&&"star"!==r;e.hasEditableShape=!o;const a=F(n,"fieldset"),i=U("input#shape-sides-amount",a),u=U("input#shape-star-inner-radius",a);!0===e.hasEditableShape?V(i):z(i);"star"===r?V(u):z(u),s(e)}function X(t){const n=t.currentTarget;if(isNaN(n.valueAsNumber))return;K(n,0,Number.POSITIVE_INFINITY);const r=M(H("for",B(n)));e[r]=n.valueAsNumber,s(e)}function J(t){const n=t.currentTarget;if(isNaN(n.valueAsNumber))return;K(n,Number(n.min),Number(n.max));const r=M(H("for",B(n)));switch(r){case"shapeSidesAmount":e.sides=n.valueAsNumber;break;case"shapeStarInnerRadius":e.innerRadius=n.valueAsNumber}s(r),s(e)}function K(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const r=e.valueAsNumber;r>n&&(e.valueAsNumber=n);r<t&&(e.valueAsNumber=t)}function Q(e){const t=e.currentTarget,s=t.name;t.checked?n[s].id=r.set(10,Z,t):r.clear(n[s].id)}function Z(t){const r=t.name,s=F(t,".controls__brush-container"),o=U(".controls__input--range",s),a=o.valueAsNumber,i=Number(o.max),u=Number(o.min);a>=i&&(n[r].direction="backwards");a<=u&&(n[r].direction="forwards");const c="forwards"===n[r].direction;o.valueAsNumber=c?a+1:a-1;const l=`${o.valueAsNumber}`,d=o.name;e[d]=o.valueAsNumber,re(s,l)}function ee(t){const n=t.currentTarget,r=n.valueAsNumber,o=B(n),a=n.name;e[a]=r,s(e),re(o,r)}function te(t){const n=t.currentTarget,r=L(n.value,"uppercase"),o=B(n);re(o,r);const a=U("div",B(o));s(a);const i=n.id,u=ne(a);e[i]=u?"transparent":r,s(e)}function ne(e){return!U("input[type=checkbox]",e).checked}function re(e,t){U("span",e).textContent=t}U("canvas.index__canvas");const se=U(".tools"),oe=(U(".colors"),U(".controls"),U(".shapes"));U(".miscellaneous");!function(){const e=$("tools__input",se);for(const t of e)t.addEventListener("change",G)}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(t)):Array.from(n.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,n;for(const t of e)t.addEventListener("change",P);U(".colors__input--stroke-width").addEventListener("input",X)}(),function(){const e=$("controls__input--checkbox");for(const t of e)t.addEventListener("change",Q);const t=$("input--color");for(const e of t)e.addEventListener("input",te);const n=$("controls__input--range");for(const e of n)e.addEventListener("input",ee);const r=$("controls__input--number");for(const e of r)e.addEventListener("input",X)}(),function(){const e=$("shapes__input--radio",oe);for(const t of e)t.addEventListener("change",W);const t=$("shapes__input--number",oe);for(const e of t)e.addEventListener("input",J)}(),U(".miscellaneous__select").addEventListener("change",D),r.set(2e3,(()=>{s(e)}))})()})();