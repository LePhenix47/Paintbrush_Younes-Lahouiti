(()=>{"use strict";(()=>{const e={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,isDrawing:!1,shadow:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"};class t{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}t.arrayOfIds=[];const{log:n,error:r,table:s,time:o,timeEnd:a,timeStamp:i,timeLog:u,assert:c,clear:l,count:d,countReset:h,group:f,groupCollapsed:m,groupEnd:p,trace:b,profile:g,profileEnd:v,warn:w,debug:N,info:_,dir:A,dirxml:E}=console;function I(e){return Number(`0x${e}`)}function y(e){return e.toString(16)}function S(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),r=t[e].slice(1).toLowerCase();t[e]=n+r}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function x(e,t){return e.split(t)}function L(e,t,n){return e.substring(t,n)}function k(e){let t=x(e,"-");for(let e=1;e<t.length;e++)t[e]=S(t[e],"titlecase");const n=t.join();return r=",",s="",n.replaceAll(r,s);var r,s}function C(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,r;"#"===e.charAt(0)&&(n=1,t=e.slice(n,r));let s=[L(t,0,2),L(t,2,4),L(t,4,6)];for(let e=0;e<s.length;e++){let t=s[e];s[e]=I(t)}return{red:Number(s[0]),green:Number(s[1]),blue:Number(s[2])}}function M(e,t,n){const r=e/255,s=t/255,o=n/255,a=Math.max(r,s,o),i=Math.min(r,s,o),u=a-i,c=(a+i)/2;let l,d;if(a===i)d=0,l=0;else switch(l=c>.5?u/(2-a-i):u/(a+i),a){case r:d=((s-o)/u+(s<o?6:0))/6;break;case s:d=((o-r)/u+2)/6;break;case o:d=((r-s)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*c)}}function T(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=e/360,s=t/100,o=n/100,a=(1-Math.abs(2*o-1))*s,i=6*r,u=a*(1-Math.abs(i%2-1));let c,l,d;[c,l,d]=i>=0&&i<1?[a,u,0]:i>=1&&i<2?[u,a,0]:i>=2&&i<3?[0,a,u]:i>=3&&i<4?[0,u,a]:i>=4&&i<5?[u,0,a]:[a,0,u];const h=o-a/2,f=Math.round(255*(c+h)),m=Math.round(255*(l+h)),p=Math.round(255*(d+h));return`#${y(f).padStart(2,"0")}${y(m).padStart(2,"0")}${y(p).padStart(2,"0")}`}function O(e,t,n){let r;t=t.toLowerCase(),n=n.toLowerCase();const s=t.includes("hex")&&n.includes("rgb"),o=t.includes("rgb")&&n.includes("hsl"),a=t.includes("hsl")&&n.includes("hex"),i=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),l=t.includes("hex")&&n.includes("hsl");if(s)r=C(e);else if(o)r=M(e.red,e.green,e.blue);else if(a)r=T(e.hue,e.saturation,e.lightness);else if(i)r=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=t/100,s=n/100,o=e/360,a=1-Math.max(r,s),i=1-Math.min(r,s);return{hue:Math.round(360*o),whiteness:Math.round(100*a),blackness:Math.round(100*i)}}(e.hue,e.saturation,e.lightness);else if(u){r=C(T(e.hue,e.saturation,e.lightness))}else if(c){const t=M(e.red,e.green,e.blue);r=T(t.hue,t.saturation,t.lightness)}else{if(!l)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=C(e);r=M(t.red,t.green,t.blue)}}return r}function R(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function q(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function $(e){return e.parentElement}function U(e,t){return e.closest(t)}function B(e,t){return t.getAttribute(e)}function F(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function H(e){F(e,"disabled","enabled")}function Y(e){F(e,"enabled","disabled")}const V={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}};function z(e){const r=e.currentTarget,s=U(r,".colors__container"),o=q(".colors__input",s),a=o.value,i=o.id;n(s);const{hue:u,saturation:c,lightness:l}=O(a,"hex","hsl");if(ne(s)||(0===c||0===l||100===l))return;V[i].type=i,V[i].hue=u,V[i].saturation=c,V[i].lightness=l;r.checked?V[i].animationId=t.set(50,P,o,V[i]):t.clear(V[i].animationId)}function P(t,r){r.hue+=2,r.hue%=360;let s=O(r,"hsl","hex");s=S(s,"uppercase");const o=$(t);t.value=s,re(o,s),e[r.type]=s,n(e)}function j(t){const r=t.currentTarget.value;e.globalCompositeOperation=r,n(e)}function D(t){const r=t.currentTarget;e.tool=r.id,n(e)}function G(t){const r=t.currentTarget,s=x(r.id,"-")[0];e.shape=s;const o="polygon"!==s&&"star"!==s;e.hasEditableShape=!o;const a=U(r,"fieldset"),i=q("input#shape-sides-amount",a),u=q("input#shape-star-inner-radius",a);!0===e.hasEditableShape?H(i):Y(i);"star"===s?H(u):Y(u),n(e)}function W(t){const r=t.currentTarget;if(isNaN(r.valueAsNumber))return;J(r,0,Number.POSITIVE_INFINITY);const s=k(B("for",$(r)));e[s]=r.valueAsNumber,n(e)}function X(t){const r=t.currentTarget;if(isNaN(r.valueAsNumber))return;J(r,Number(r.min),Number(r.max));const s=k(B("for",$(r)));switch(s){case"shapeSidesAmount":e.sides=r.valueAsNumber;break;case"shapeStarInnerRadius":e.innerRadius=r.valueAsNumber}n(s),n(e)}function J(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const r=e.valueAsNumber;r>n&&(e.valueAsNumber=n);r<t&&(e.valueAsNumber=t)}const K={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function Q(e){const n=e.currentTarget,r=n.name;n.checked?K[r].id=t.set(10,Z,n):t.clear(K[r].id)}function Z(t){const n=t.name,r=U(t,".controls__brush-container"),s=q(".controls__input--range",r),o=s.valueAsNumber,a=Number(s.max),i=Number(s.min);o>=a&&(K[n].direction="backwards");o<=i&&(K[n].direction="forwards");const u="forwards"===K[n].direction;s.valueAsNumber=u?o+1:o-1;const c=`${s.valueAsNumber}`,l=s.name;e[l]=s.valueAsNumber,re(r,c)}function ee(t){const r=t.currentTarget,s=r.valueAsNumber,o=$(r),a=r.name;e[a]=s,n(e),re(o,s)}function te(t){const r=t.currentTarget,s=S(r.value,"uppercase"),o=$(r);re(o,s);const a=q("div",$(o));n(a);const i=r.id,u=ne(a);e[i]=u?"transparent":s,n(e)}function ne(e){return!q("input[type=checkbox]",e).checked}function re(e,t){q("span",e).textContent=t}q("canvas.index__canvas");const se=q(".tools"),oe=(q(".colors"),q(".controls"),q(".shapes"));q(".miscellaneous");!function(){const e=R("tools__input",se);for(const t of e)t.addEventListener("change",D)}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(t)):Array.from(n.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,n;for(const t of e)t.addEventListener("change",z);q(".colors__input--stroke-width").addEventListener("input",W)}(),function(){const e=R("controls__input--checkbox");for(const t of e)t.addEventListener("change",Q);const t=R("input--color");for(const e of t)e.addEventListener("input",te);const n=R("controls__input--range");for(const e of n)e.addEventListener("input",ee);const r=R("controls__input--number");for(const e of r)e.addEventListener("input",W)}(),function(){const e=R("shapes__input--radio",oe);for(const t of e)t.addEventListener("change",G);const t=R("shapes__input--number",oe);for(const e of t)e.addEventListener("input",X)}(),q(".miscellaneous__select").addEventListener("change",j),t.set(1e3,(()=>{n(e)}))})()})();