(()=>{"use strict";(()=>{class t{constructor(){}static set(t,e,...r){return this.id=setInterval((()=>{e(...r)}),t),this.arrayOfIds.push(this.id),this.id}static clear(t){const e=this.arrayOfIds.find((e=>e===t));clearInterval(e),this.arrayOfIds=this.arrayOfIds.filter((t=>t!==e))}}t.arrayOfIds=[];const{log:e,error:r,table:n,time:o,timeEnd:s,timeStamp:a,timeLog:i,assert:c,clear:u,count:l,countReset:d,group:h,groupCollapsed:f,groupEnd:g,trace:p,profile:m,profileEnd:b,warn:w,debug:v,info:y,dir:_,dirxml:E}=console;function k(t){return Number(`0x${t}`)}function S(t){return t.toString(16)}function C(t,e){switch(e.toLowerCase().trim()){case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();case"titlecase":{let e=t.split(" ");for(let t=0;t<e.length;t++){const r=e[t].substring(0,1).toUpperCase(),n=e[t].slice(1).toLowerCase();e[t]=r+n}return e=e.concat(),e.toString()}case"titlecase2":return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function N(t,e,r){return t.substring(e,r)}function x(t,e){var r;if(!e)return Array.from(document.getElementsByClassName(t));return(null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.includes("-"))?Array.from(e.shadowRoot.getElementsByClassName(t)):Array.from(e.getElementsByClassName(t))}function L(t,e){var r;if(!e)return document.querySelector(t);return(null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function A(t){return t.parentElement}function M(t,e){return t.closest(e)}const I={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,isDrawing:!1,shadow:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasShape:!1,shape:"none",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},O=(L("canvas.index__canvas"),L(".tools"));L(".colors"),L(".controls"),L(".shapes"),L(".miscellaneous");!function(){const t=x("tools__input",O);for(const e of t)e.addEventListener("change",T)}(),function(){const t=(e=".color__input--checkbox:not(input#fill-show, input#stroke-show)",r?r.tagName.includes("-")?Array.from(r.shadowRoot.querySelectorAll(e)):Array.from(r.querySelectorAll(e)):Array.from(document.querySelectorAll(e)));var e,r;n(t);for(const e of t)e.addEventListener("change",$)}();const q={fill:{id:0,hue:0},stroke:{id:0,hue:0}};function $(r){const n=r.currentTarget,o=L(".colors__input",M(n,".colors__container")),s=o.id;n.checked?(q[s].hue=0,q[s].id=t.set(500,R,o,q[s])):t.clear(q[s].id),e(o)}function R(t,r){const n=t.value,{red:o,green:s,blue:a}=function(t){if((null==t?void 0:t.length)<6||(null==t?void 0:t.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${t.length}`;let e=t;var r,n;"#"===t.charAt(0)&&(r=1,e=t.slice(r,n));let o=[N(e,0,2),N(e,2,4),N(e,4,6)];for(let t=0;t<o.length;t++){let e=o[t];o[t]=k(e)}return{red:Number(o[0]),green:Number(o[1]),blue:Number(o[2])}}(n);let{hue:i,saturation:c,lightness:u}=function(t,e,r){const n=t/255,o=e/255,s=r/255,a=Math.max(n,o,s),i=Math.min(n,o,s),c=a-i,u=(a+i)/2;let l,d;if(a===i)d=0,l=0;else switch(l=u>.5?c/(2-a-i):c/(a+i),a){case n:d=((o-s)/c+(o<s?6:0))/6;break;case o:d=((s-n)/c+2)/6;break;case s:d=((n-o)/c+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*u)}}(o,s,a);r.hue=i,r.hue++;const l=function(t,e=100,r=50){if(t<0||t>360||e<0||e>100||r<0||r>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const n=t/360,o=e/100,s=r/100,a=(1-Math.abs(2*s-1))*o,i=6*n,c=a*(1-Math.abs(i%2-1));let u,l,d;[u,l,d]=i>=0&&i<1?[a,c,0]:i>=1&&i<2?[c,a,0]:i>=2&&i<3?[0,a,c]:i>=3&&i<4?[0,c,a]:i>=4&&i<5?[c,0,a]:[a,0,c];const h=s-a/2,f=Math.round(255*(u+h)),g=Math.round(255*(l+h)),p=Math.round(255*(d+h));return`#${S(f).padStart(2,"0")}${S(g).padStart(2,"0")}${S(p).padStart(2,"0")}`}(r.hue,c,u);e(n),e("test:",{red:o,green:s,blue:a},l)}function T(t){const r=t.currentTarget;I.tool=r.id,e(I)}!function(){const t=x("controls__input--checkbox"),e=x("input--color"),r=x("controls__input--range");for(const e of t)e.addEventListener("change",U);for(const t of r)t.addEventListener("input",H);for(const t of e)t.addEventListener("input",D)}();const B={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function U(e){const r=e.currentTarget,n=r.name;r.checked?B[n].id=t.set(10,z,r):t.clear(B[n].id)}function z(t){const e=t.name,r=M(t,".controls__brush-container"),n=L(".controls__input--range",r),o=Number(n.value),s=Number(n.max),a=Number(n.min);o>=s&&(B[e].direction="backwards");o<=a&&(B[e].direction="forwards");const i="forwards"===B[e].direction;n.value=i?o+1:o-1;F(r,`${n.value}`)}function H(t){const e=t.currentTarget,r=e.value;F(A(e),r)}function D(t){const r=t.currentTarget,n=C(r.value,"uppercase"),o=A(r);F(o,n);const s=L("div",A(o));e(s);const a=r.id,i=function(t){const e=L("input[type=checkbox]",t);return!e.checked}(s);I[a]=i?"transparent":n,e(I)}function F(t,e){L("span",t).textContent=e}})()})();