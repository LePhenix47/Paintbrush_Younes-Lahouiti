(()=>{"use strict";(()=>{class e{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}e.arrayOfIds=[];const{log:t,error:n,table:r,time:o,timeEnd:s,timeStamp:a,timeLog:i,assert:u,clear:c,count:l,countReset:d,group:h,groupCollapsed:f,groupEnd:g,trace:p,profile:m,profileEnd:b,warn:w,debug:v,info:y,dir:x,dirxml:_}=console;function E(e){return Number(`0x${e}`)}function C(e){return e.toString(16)}function k(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),r=t[e].slice(1).toLowerCase();t[e]=n+r}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function M(e,t,n){return e.substring(t,n)}function S(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,r;"#"===e.charAt(0)&&(n=1,t=e.slice(n,r));let o=[M(t,0,2),M(t,2,4),M(t,4,6)];for(let e=0;e<o.length;e++){let t=o[e];o[e]=E(t)}return{red:Number(o[0]),green:Number(o[1]),blue:Number(o[2])}}function L(e,t,n){const r=e/255,o=t/255,s=n/255,a=Math.max(r,o,s),i=Math.min(r,o,s),u=a-i,c=(a+i)/2;let l,d;if(a===i)d=0,l=0;else switch(l=c>.5?u/(2-a-i):u/(a+i),a){case r:d=((o-s)/u+(o<s?6:0))/6;break;case o:d=((s-r)/u+2)/6;break;case s:d=((r-o)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*c)}}function I(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=e/360,o=t/100,s=n/100,a=(1-Math.abs(2*s-1))*o,i=6*r,u=a*(1-Math.abs(i%2-1));let c,l,d;[c,l,d]=i>=0&&i<1?[a,u,0]:i>=1&&i<2?[u,a,0]:i>=2&&i<3?[0,a,u]:i>=3&&i<4?[0,u,a]:i>=4&&i<5?[u,0,a]:[a,0,u];const h=s-a/2,f=Math.round(255*(c+h)),g=Math.round(255*(l+h)),p=Math.round(255*(d+h));return`#${C(f).padStart(2,"0")}${C(g).padStart(2,"0")}${C(p).padStart(2,"0")}`}function N(e,t,n){let r;t=t.toLowerCase(),n=n.toLowerCase();const o=t.includes("hex")&&n.includes("rgb"),s=t.includes("rgb")&&n.includes("hsl"),a=t.includes("hsl")&&n.includes("hex"),i=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),l=t.includes("hex")&&n.includes("hsl");if(o)r=S(e);else if(s)r=L(e.red,e.green,e.blue);else if(a)r=I(e.hue,e.saturation,e.lightness);else if(i)r=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=t/100,o=n/100,s=e/360,a=1-Math.max(r,o),i=1-Math.min(r,o);return{hue:Math.round(360*s),whiteness:Math.round(100*a),blackness:Math.round(100*i)}}(e.hue,e.saturation,e.lightness);else if(u){r=S(I(e.hue,e.saturation,e.lightness))}else if(c){const t=L(e.red,e.green,e.blue);r=I(t.hue,t.saturation,t.lightness)}else{if(!l)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=S(e);r=L(t.red,t.green,t.blue)}}return r}function A(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function O(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function q(e){return e.parentElement}function $(e,t){return e.closest(t)}const R={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,isDrawing:!1,shadow:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasShape:!1,shape:"none",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},T=(O("canvas.index__canvas"),O(".tools"));O(".colors"),O(".controls"),O(".shapes"),O(".miscellaneous");!function(){const e=A("tools__input",T);for(const t of e)t.addEventListener("change",z)}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(t)):Array.from(n.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,n;r(e);for(const t of e)t.addEventListener("change",B)}();const U={fill:{animationId:0,hue:0,saturation:0,lightness:0},stroke:{animationId:0,hue:0,saturation:0,lightness:0}};function B(n){const r=n.currentTarget,o=O(".colors__input",$(r,".colors__container")),s=o.value,a=o.id,{hue:i,saturation:u,lightness:c}=N(s,"hex","hsl");if(0===u||0===c||100===c)return;U[a].hue=i,U[a].saturation=u,U[a].lightness=c;r.checked?U[a].animationId=e.set(50,H,o,U[a]):e.clear(U[a].animationId),t(o)}function H(e,t){t.hue+=2,t.hue%=360;let n=N(t,"hsl","hex");n=k(n,"uppercase");const r=q(e);e.value=n,j(r,n)}function z(e){const n=e.currentTarget;R.tool=n.id,t(R)}!function(){const e=A("controls__input--checkbox"),t=A("input--color"),n=A("controls__input--range");for(const t of e)t.addEventListener("change",F);for(const e of n)e.addEventListener("input",X);for(const e of t)e.addEventListener("input",Y)}();const D={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function F(t){const n=t.currentTarget,r=n.name;n.checked?D[r].id=e.set(10,W,n):e.clear(D[r].id)}function W(e){const t=e.name,n=$(e,".controls__brush-container"),r=O(".controls__input--range",n),o=Number(r.value),s=Number(r.max),a=Number(r.min);o>=s&&(D[t].direction="backwards");o<=a&&(D[t].direction="forwards");const i="forwards"===D[t].direction;r.value=i?o+1:o-1;j(n,`${r.value}`)}function X(e){const t=e.currentTarget,n=t.value;j(q(t),n)}function Y(e){const n=e.currentTarget,r=k(n.value,"uppercase"),o=q(n);j(o,r);const s=O("div",q(o));t(s);const a=n.id,i=function(e){const t=O("input[type=checkbox]",e);return!t.checked}(s);R[a]=i?"transparent":r,t(R)}function j(e,t){O("span",e).textContent=t}})()})();