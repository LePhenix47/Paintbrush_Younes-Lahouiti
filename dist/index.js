(()=>{"use strict";(()=>{const{log:e,error:t,table:n,time:r,timeEnd:s,timeStamp:o,timeLog:a,assert:i,clear:u,count:c,countReset:l,group:d,groupCollapsed:h,groupEnd:f,trace:m,profile:p,profileEnd:g,warn:b,debug:v,info:w,dir:N,dirxml:E}=console,_={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,shadow:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},y={x:NaN,y:NaN,isDrawing:!1},A={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},I={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function x(e){y.x=e.x,y.y=e.y}function L(t){0===t.button&&(y.isDrawing=!0),e(y)}function S(t){0===t.button&&(y.isDrawing=!1),e(y)}class k{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}function C(e){return Number(`0x${e}`)}function M(e){return e.toString(16)}function T(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),r=t[e].slice(1).toLowerCase();t[e]=n+r}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function O(e,t){return e.split(t)}function R(e,t,n){return e.substring(t,n)}function q(e){let t=O(e,"-");for(let e=1;e<t.length;e++)t[e]=T(t[e],"titlecase");const n=t.join();return r=",",s="",n.replaceAll(r,s);var r,s}function $(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,r;"#"===e.charAt(0)&&(n=1,t=e.slice(n,r));let s=[R(t,0,2),R(t,2,4),R(t,4,6)];for(let e=0;e<s.length;e++){let t=s[e];s[e]=C(t)}return{red:Number(s[0]),green:Number(s[1]),blue:Number(s[2])}}function B(e,t,n){const r=e/255,s=t/255,o=n/255,a=Math.max(r,s,o),i=Math.min(r,s,o),u=a-i,c=(a+i)/2;let l,d;if(a===i)d=0,l=0;else switch(l=c>.5?u/(2-a-i):u/(a+i),a){case r:d=((s-o)/u+(s<o?6:0))/6;break;case s:d=((o-r)/u+2)/6;break;case o:d=((r-s)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*c)}}function U(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=e/360,s=t/100,o=n/100,a=(1-Math.abs(2*o-1))*s,i=6*r,u=a*(1-Math.abs(i%2-1));let c,l,d;[c,l,d]=i>=0&&i<1?[a,u,0]:i>=1&&i<2?[u,a,0]:i>=2&&i<3?[0,a,u]:i>=3&&i<4?[0,u,a]:i>=4&&i<5?[u,0,a]:[a,0,u];const h=o-a/2,f=Math.round(255*(c+h)),m=Math.round(255*(l+h)),p=Math.round(255*(d+h));return`#${M(f).padStart(2,"0")}${M(m).padStart(2,"0")}${M(p).padStart(2,"0")}`}function F(e,t,n){let r;t=t.toLowerCase(),n=n.toLowerCase();const s=t.includes("hex")&&n.includes("rgb"),o=t.includes("rgb")&&n.includes("hsl"),a=t.includes("hsl")&&n.includes("hex"),i=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),l=t.includes("hex")&&n.includes("hsl");if(s)r=$(e);else if(o)r=B(e.red,e.green,e.blue);else if(a)r=U(e.hue,e.saturation,e.lightness);else if(i)r=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=t/100,s=n/100,o=e/360,a=1-Math.max(r,s),i=1-Math.min(r,s);return{hue:Math.round(360*o),whiteness:Math.round(100*a),blackness:Math.round(100*i)}}(e.hue,e.saturation,e.lightness);else if(u){r=$(U(e.hue,e.saturation,e.lightness))}else if(c){const t=B(e.red,e.green,e.blue);r=U(t.hue,t.saturation,t.lightness)}else{if(!l)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=$(e);r=B(t.red,t.green,t.blue)}}return r}function H(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function Y(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function D(e){return e.parentElement}function V(e,t){return e.closest(t)}function z(e,t){return t.getAttribute(e)}function P(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function j(e){P(e,"disabled","enabled")}function G(e){P(e,"enabled","disabled")}function W(e){const t=e.currentTarget,n=V(t,".colors__container"),r=Y(".colors__input",n),s=r.value,o=r.id,{hue:a,saturation:i,lightness:u}=F(s,"hex","hsl");if(ae(n)||(0===i||0===u||100===u))return;A[o].type=o,A[o].hue=a,A[o].saturation=i,A[o].lightness=u;t.checked?A[o].animationId=k.set(50,X,r,A[o]):k.clear(A[o].animationId)}function X(e,t){t.hue+=2,t.hue%=360;let n=F(t,"hsl","hex");n=T(n,"uppercase");const r=D(e);e.value=n,ie(r,n),_[t.type]=n}function J(e){const t=e.currentTarget.value;_.globalCompositeOperation=t}function K(e){const t=e.currentTarget;_.tool=t.id}function Q(e){const t=e.currentTarget,n=O(t.id,"-")[0];_.shape=n;const r="polygon"!==n&&"star"!==n;_.hasEditableShape=!r;const s=V(t,"fieldset"),o=Y("input#shape-sides-amount",s),a=Y("input#shape-star-inner-radius",s);!0===_.hasEditableShape?j(o):G(o);"star"===n?j(a):G(a)}function Z(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;te(t,0,Number.POSITIVE_INFINITY);const n=q(z("for",D(t)));_[n]=t.valueAsNumber}function ee(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;te(t,Number(t.min),Number(t.max));switch(q(z("for",D(t)))){case"shapeSidesAmount":_.sides=t.valueAsNumber;break;case"shapeStarInnerRadius":_.innerRadius=t.valueAsNumber}}function te(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const r=e.valueAsNumber;r>n&&(e.valueAsNumber=n);r<t&&(e.valueAsNumber=t)}function ne(e){const t=e.currentTarget,n=t.name;t.checked?I[n].id=k.set(10,re,t):k.clear(I[n].id)}function re(e){const t=e.name,n=V(e,".controls__brush-container"),r=Y(".controls__input--range",n),s=r.valueAsNumber,o=Number(r.max),a=Number(r.min);s>=o&&(I[t].direction="backwards");s<=a&&(I[t].direction="forwards");const i="forwards"===I[t].direction;r.valueAsNumber=i?s+1:s-1;const u=`${r.valueAsNumber}`,c=r.name;_[c]=r.valueAsNumber,ie(n,u)}function se(e){const t=e.currentTarget,n=t.valueAsNumber,r=D(t),s=t.name;_[s]=n,ie(r,n)}function oe(e){const t=e.currentTarget,n=T(t.value,"uppercase"),r=D(t);ie(r,n);const s=Y("div",D(r)),o=t.id,a=ae(s);_[o]=a?"transparent":n}function ae(e){return!Y("input[type=checkbox]",e).checked}function ie(e,t){Y("span",e).textContent=t}k.arrayOfIds=[];const ue=Y("canvas.index__canvas"),ce=Y("fieldset.tools"),le=(Y("fieldset.colors"),Y("fieldset.controls"),Y("fieldset.shapes"));Y("fieldset.miscellaneous");!function(){const e=H("tools__input",ce);for(const t of e)t.addEventListener("change",K)}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(t)):Array.from(n.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,n;for(const t of e)t.addEventListener("change",W);Y(".colors__input--stroke-width").addEventListener("input",Z)}(),function(){const e=H("controls__input--checkbox");for(const t of e)t.addEventListener("change",ne);const t=H("input--color");for(const e of t)e.addEventListener("input",oe);const n=H("controls__input--range");for(const e of n)e.addEventListener("input",se);const r=H("controls__input--number");for(const e of r)e.addEventListener("input",Z)}(),function(){const e=H("shapes__input--radio",le);for(const t of e)t.addEventListener("change",Q);const t=H("shapes__input--number",le);for(const e of t)e.addEventListener("input",ee)}(),Y(".miscellaneous__select").addEventListener("change",J),function(){const e=Y("main.index"),{width:t,height:n}=e.getBoundingClientRect();ue.addEventListener("mousemove",x),ue.addEventListener("mousedown",L),ue.addEventListener("mouseup",S)}(),k.set(3500,(()=>{e(_,y)}))})()})();