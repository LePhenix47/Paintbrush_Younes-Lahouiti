(()=>{"use strict";(()=>{function e(e,t){return e.getContext("2d",t)}function t(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function n(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function s(e){return e.parentElement}function r(e,t){return e.closest(t)}function o(e,t){return t.getAttribute(e)}function i(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function a(e){i(e,"disabled","enabled")}function u(e){i(e,"enabled","disabled")}const l={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},c={x:NaN,y:NaN,isDrawing:!1},d={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},h={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function f(e){const t=n("canvas.index__canvas"),{x:s,y:r}=t.getBoundingClientRect();c.x=e.x-s,c.y=e.y-r}function p(e){0===e.button&&(c.isDrawing=!0)}function g(e){0===e.button&&(c.isDrawing=!1)}class m{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}m.arrayOfIds=[];const{log:b,error:w,table:v,time:x,timeEnd:N,timeStamp:y,timeLog:E,assert:_,clear:k,count:A,countReset:S,group:I,groupCollapsed:C,groupEnd:L,trace:O,profile:T,profileEnd:M,warn:R,debug:z,info:q,dir:B,dirxml:D}=console;function P(e){return Number(`0x${e}`)}function Y(e){return e.toString(16)}function V(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),s=t[e].slice(1).toLowerCase();t[e]=n+s}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function $(e,t){return e.split(t)}function F(e,t,n){return e.substring(t,n)}function U(e){let t=$(e,"-");for(let e=1;e<t.length;e++)t[e]=V(t[e],"titlecase");const n=t.join();return s=",",r="",n.replaceAll(s,r);var s,r}function W(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,s;"#"===e.charAt(0)&&(n=1,t=e.slice(n,s));let r=[F(t,0,2),F(t,2,4),F(t,4,6)];for(let e=0;e<r.length;e++){let t=r[e];r[e]=P(t)}return{red:Number(r[0]),green:Number(r[1]),blue:Number(r[2])}}function X(e,t,n){const s=e/255,r=t/255,o=n/255,i=Math.max(s,r,o),a=Math.min(s,r,o),u=i-a,l=(i+a)/2;let c,d;if(i===a)d=0,c=0;else switch(c=l>.5?u/(2-i-a):u/(i+a),i){case s:d=((r-o)/u+(r<o?6:0))/6;break;case r:d=((o-s)/u+2)/6;break;case o:d=((s-r)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*c),lightness:Math.round(100*l)}}function H(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=e/360,r=t/100,o=n/100,i=(1-Math.abs(2*o-1))*r,a=6*s,u=i*(1-Math.abs(a%2-1));let l,c,d;[l,c,d]=a>=0&&a<1?[i,u,0]:a>=1&&a<2?[u,i,0]:a>=2&&a<3?[0,i,u]:a>=3&&a<4?[0,u,i]:a>=4&&a<5?[u,0,i]:[i,0,u];const h=o-i/2,f=Math.round(255*(l+h)),p=Math.round(255*(c+h)),g=Math.round(255*(d+h));return`#${Y(f).padStart(2,"0")}${Y(p).padStart(2,"0")}${Y(g).padStart(2,"0")}`}function j(e,t,n){let s;t=t.toLowerCase(),n=n.toLowerCase();const r=t.includes("hex")&&n.includes("rgb"),o=t.includes("rgb")&&n.includes("hsl"),i=t.includes("hsl")&&n.includes("hex"),a=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),l=t.includes("rgb")&&n.includes("hex"),c=t.includes("hex")&&n.includes("hsl");if(r)s=W(e);else if(o)s=X(e.red,e.green,e.blue);else if(i)s=H(e.hue,e.saturation,e.lightness);else if(a)s=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const s=t/100,r=n/100,o=e/360,i=1-Math.max(s,r),a=1-Math.min(s,r);return{hue:Math.round(360*o),whiteness:Math.round(100*i),blackness:Math.round(100*a)}}(e.hue,e.saturation,e.lightness);else if(u){s=W(H(e.hue,e.saturation,e.lightness))}else if(l){const t=X(e.red,e.green,e.blue);s=H(t.hue,t.saturation,t.lightness)}else{if(!c)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=W(e);s=X(t.red,t.green,t.blue)}}return s}function G(e){const t=e.currentTarget,s=r(t,".colors__container"),o=n(".colors__input",s),i=o.value,a=o.id,{hue:u,saturation:l,lightness:c}=j(i,"hex","hsl");if(ue(s)||(0===l||0===c||100===c))return;d[a].type=a,d[a].hue=u,d[a].saturation=l,d[a].lightness=c;t.checked?d[a].animationId=m.set(50,J,o,d[a]):m.clear(d[a].animationId)}function J(e,t){t.hue+=2,t.hue%=360;let n=j(t,"hsl","hex");n=V(n,"uppercase");const r=s(e);e.value=n,le(r,n),l[t.type]=n}function K(e){const t=e.currentTarget.value;l.globalCompositeOperation=t}function Q(e){const t=e.currentTarget;l.tool=t.id}function Z(e){const t=e.currentTarget,s=$(t.id,"-")[0];l.shape=s;const o="polygon"!==s&&"star"!==s;l.hasEditableShape=!o;const i=r(t,"fieldset"),c=n("input#shape-sides-amount",i),d=n("input#shape-star-inner-radius",i);!0===l.hasEditableShape?a(c):u(c);"star"===s?a(d):u(d)}function ee(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;ne(t,0,Number.POSITIVE_INFINITY);const n=U(o("for",s(t)));l[n]=t.valueAsNumber}function te(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;ne(t,Number(t.min),Number(t.max));switch(U(o("for",s(t)))){case"shapeSidesAmount":l.sides=t.valueAsNumber;break;case"shapeStarInnerRadius":l.innerRadius=t.valueAsNumber}}function ne(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const s=e.valueAsNumber;s>n&&(e.valueAsNumber=n);s<t&&(e.valueAsNumber=t)}function se(e){const t=e.currentTarget,n=t.name;t.checked?h[n].id=m.set(10,re,t):m.clear(h[n].id)}function re(e){const t=e.name,s=r(e,".controls__brush-container"),o=n(".controls__input--range",s),i=o.valueAsNumber,a=Number(o.max),u=Number(o.min);i>=a&&(h[t].direction="backwards");i<=u&&(h[t].direction="forwards");const c="forwards"===h[t].direction;o.valueAsNumber=c?i+1:i-1;const d=`${o.valueAsNumber}`,f=o.name;l[f]=o.valueAsNumber,le(s,d)}function oe(e){const t=e.currentTarget,n=t.valueAsNumber,r=s(t),o=t.name;l[o]=n,le(r,n)}function ie(e){const t=e.currentTarget,r=V(t.value,"uppercase"),o=s(t);le(o,r);const i=n("div",s(o)),a=t.id,u=ue(i);l[a]=u?"transparent":r}function ae(e){const t=e.currentTarget,o=$(t.id,"-")[0];if(t.checked){const e=V(n("input[type=color]",s(r(t,"div"))).value,"uppercase");l[o]=e}else l[o]="transparent"}function ue(e){return!n("input[type=checkbox]",e).checked}function le(e,t){n("span",e).textContent=t}const ce=n("canvas.index__canvas"),de=e(ce),he=n("fieldset.tools"),fe=(n("fieldset.colors"),n("fieldset.controls"),n("fieldset.shapes"));n("fieldset.miscellaneous");!function(){const e=t("tools__input",he);for(const t of e)t.addEventListener("change",Q);n(".tools__button").addEventListener("click",(e=>{var t,n,s,r;n=de,s=(t=ce).width,r=t.height,n.clearRect(0,0,s,r)}))}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",s?s.tagName.includes("-")?Array.from(s.shadowRoot.querySelectorAll(t)):Array.from(s.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,s;for(const t of e)t.addEventListener("change",G);n(".colors__input--stroke-width").addEventListener("input",ee)}(),function(){const e=t("controls__input--checkbox");for(const t of e)t.addEventListener("change",se);const n=t("input--color");for(const e of n)e.addEventListener("input",ie);const s=t("show-input");for(const e of s)e.addEventListener("change",ae);const r=t("controls__input--range");for(const e of r)e.addEventListener("input",oe);const o=t("controls__input--number");for(const e of o)e.addEventListener("input",ee)}(),function(){const e=t("shapes__input--radio",fe);for(const t of e)t.addEventListener("change",Z);const n=t("shapes__input--number",fe);for(const e of n)e.addEventListener("input",te)}(),n(".miscellaneous__select").addEventListener("change",K),ce.addEventListener("mousemove",f),ce.addEventListener("mousedown",p),ce.addEventListener("mouseup",g),window.addEventListener("resize",ge);let pe=0;function ge(){const e=n("main.index"),{width:t,height:s}=e.getBoundingClientRect();ce.width=.97*t,ce.height=.97*s}ge();let me=new class{constructor(t,{tool:n,fill:s,stroke:r,strokeWidth:o,size:i,angle:a,shadow:u,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:d,hasEditableShape:h,shape:f,sides:p,innerRadius:g,globalCompositeOperation:m},{x:w,y:v,isDrawing:x}){this.canvas=t,this.context=e(this.canvas),this.updatePropertyValues({tool:n,fill:s,stroke:r,strokeWidth:o,size:i,angle:a,shadow:u,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:d,hasEditableShape:h,shape:f,sides:p,innerRadius:g,globalCompositeOperation:m},{x:w,y:v,isDrawing:x}),b(this)}updatePropertyValues({tool:e,fill:t,stroke:n,strokeWidth:s,size:r,angle:o,shadow:i,shadowBlur:a,shadowOffsetX:u,shadowOffsetY:l,hasEditableShape:c,shape:d,sides:h,innerRadius:f,globalCompositeOperation:p},{x:g,y:m,isDrawing:b}){this.tool=e,this.fill=t,this.stroke=n,this.strokeWidth=s,this.size=r,this.angle=o,this.shadow=i,this.shadowBlur=a,this.shadowOffsetX=u,this.shadowOffsetY=l,this.hasEditableShape=c,this.shape=d,this.sides=h,this.innerRadius=f,this.globalCompositeOperation=p,this.x=g,this.y=m,this.isDrawing=b}drawOnCanvas(){if(!!this.isDrawing)switch(this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare()}}drawCircle(){this.context.fillStyle=this.fill,this.context.beginPath(),this.context.arc(this.x,this.y,this.size,0,2*Math.PI),this.context.fill()}drawSquare(){this.context.fillStyle=this.fill,this.context.fillRect(this.x-this.size,this.y-this.size,2*this.size,2*this.size),this.context.fill()}drawStar(){this.context.save(),this.context.restore()}drawPolygon(){this.context.save(),this.context.restore()}}(ce,l,c);!function e(){me.drawOnCanvas(),me.updatePropertyValues(l,c),pe=requestAnimationFrame(e)}(),m.set(3500,(()=>{C("Tracker"),b(me),L()}))})()})();