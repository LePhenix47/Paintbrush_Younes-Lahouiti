(()=>{"use strict";(()=>{const{log:e,error:t,table:n,time:r,timeEnd:s,timeStamp:o,timeLog:i,assert:a,clear:u,count:c,countReset:l,group:d,groupCollapsed:h,groupEnd:f,trace:p,profile:m,profileEnd:g,warn:b,debug:v,info:w,dir:N,dirxml:E}=console,_={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},y={x:NaN,y:NaN,isDrawing:!1},A={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},I={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function L(){}function x(e){y.x=e.x,y.y=e.y}function k(t){0===t.button&&(y.isDrawing=!0),e(y)}function S(t){0===t.button&&(y.isDrawing=!1),e(y)}class C{constructor(){}static set(e,t,...n){return this.id=setInterval((()=>{t(...n)}),e),this.arrayOfIds.push(this.id),this.id}static clear(e){const t=this.arrayOfIds.find((t=>t===e));clearInterval(t),this.arrayOfIds=this.arrayOfIds.filter((e=>e!==t))}}function T(e){return Number(`0x${e}`)}function M(e){return e.toString(16)}function O(e,t){switch(t.toLowerCase().trim()){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase();case"titlecase":{let t=e.split(" ");for(let e=0;e<t.length;e++){const n=t[e].substring(0,1).toUpperCase(),r=t[e].slice(1).toLowerCase();t[e]=n+r}return t=t.concat(),t.toString()}case"titlecase2":return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function R(e,t){return e.split(t)}function q(e,t,n){return e.substring(t,n)}function $(e){let t=R(e,"-");for(let e=1;e<t.length;e++)t[e]=O(t[e],"titlecase");const n=t.join();return r=",",s="",n.replaceAll(r,s);var r,s}function B(e){if((null==e?void 0:e.length)<6||(null==e?void 0:e.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${e.length}`;let t=e;var n,r;"#"===e.charAt(0)&&(n=1,t=e.slice(n,r));let s=[q(t,0,2),q(t,2,4),q(t,4,6)];for(let e=0;e<s.length;e++){let t=s[e];s[e]=T(t)}return{red:Number(s[0]),green:Number(s[1]),blue:Number(s[2])}}function U(e,t,n){const r=e/255,s=t/255,o=n/255,i=Math.max(r,s,o),a=Math.min(r,s,o),u=i-a,c=(i+a)/2;let l,d;if(i===a)d=0,l=0;else switch(l=c>.5?u/(2-i-a):u/(i+a),i){case r:d=((s-o)/u+(s<o?6:0))/6;break;case s:d=((o-r)/u+2)/6;break;case o:d=((r-s)/u+4)/6}return{hue:Math.round(360*d),saturation:Math.round(100*l),lightness:Math.round(100*c)}}function F(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=e/360,s=t/100,o=n/100,i=(1-Math.abs(2*o-1))*s,a=6*r,u=i*(1-Math.abs(a%2-1));let c,l,d;[c,l,d]=a>=0&&a<1?[i,u,0]:a>=1&&a<2?[u,i,0]:a>=2&&a<3?[0,i,u]:a>=3&&a<4?[0,u,i]:a>=4&&a<5?[u,0,i]:[i,0,u];const h=o-i/2,f=Math.round(255*(c+h)),p=Math.round(255*(l+h)),m=Math.round(255*(d+h));return`#${M(f).padStart(2,"0")}${M(p).padStart(2,"0")}${M(m).padStart(2,"0")}`}function H(e,t,n){let r;t=t.toLowerCase(),n=n.toLowerCase();const s=t.includes("hex")&&n.includes("rgb"),o=t.includes("rgb")&&n.includes("hsl"),i=t.includes("hsl")&&n.includes("hex"),a=t.includes("hsl")&&n.includes("hwb"),u=t.includes("hsl")&&n.includes("rgb"),c=t.includes("rgb")&&n.includes("hex"),l=t.includes("hex")&&n.includes("hsl");if(s)r=B(e);else if(o)r=U(e.red,e.green,e.blue);else if(i)r=F(e.hue,e.saturation,e.lightness);else if(a)r=function(e,t=100,n=50){if(e<0||e>360||t<0||t>100||n<0||n>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const r=t/100,s=n/100,o=e/360,i=1-Math.max(r,s),a=1-Math.min(r,s);return{hue:Math.round(360*o),whiteness:Math.round(100*i),blackness:Math.round(100*a)}}(e.hue,e.saturation,e.lightness);else if(u){r=B(F(e.hue,e.saturation,e.lightness))}else if(c){const t=U(e.red,e.green,e.blue);r=F(t.hue,t.saturation,t.lightness)}else{if(!l)throw new Error("Color model conversion error: Unsupported color model conversion");{const t=B(e);r=U(t.red,t.green,t.blue)}}return r}function Y(e,t){var n;if(!t)return Array.from(document.getElementsByClassName(e));return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?Array.from(t.shadowRoot.getElementsByClassName(e)):Array.from(t.getElementsByClassName(e))}function z(e,t){var n;if(!t)return document.querySelector(e);return(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-"))?t.shadowRoot.querySelector(e):t.querySelector(e)}function D(e){return e.parentElement}function V(e,t){return e.closest(t)}function P(e,t){return t.getAttribute(e)}function j(e,t,n){e.removeAttribute(t),e.setAttribute(n,"")}function G(e){j(e,"disabled","enabled")}function W(e){j(e,"enabled","disabled")}function X(e){const t=e.currentTarget,n=V(t,".colors__container"),r=z(".colors__input",n),s=r.value,o=r.id,{hue:i,saturation:a,lightness:u}=H(s,"hex","hsl");if(ue(n)||(0===a||0===u||100===u))return;A[o].type=o,A[o].hue=i,A[o].saturation=a,A[o].lightness=u;t.checked?A[o].animationId=C.set(50,J,r,A[o]):C.clear(A[o].animationId)}function J(e,t){t.hue+=2,t.hue%=360;let n=H(t,"hsl","hex");n=O(n,"uppercase");const r=D(e);e.value=n,ce(r,n),_[t.type]=n}function K(e){const t=e.currentTarget.value;_.globalCompositeOperation=t}function Q(e){const t=e.currentTarget;_.tool=t.id}function Z(e){const t=e.currentTarget,n=R(t.id,"-")[0];_.shape=n;const r="polygon"!==n&&"star"!==n;_.hasEditableShape=!r;const s=V(t,"fieldset"),o=z("input#shape-sides-amount",s),i=z("input#shape-star-inner-radius",s);!0===_.hasEditableShape?G(o):W(o);"star"===n?G(i):W(i)}function ee(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;ne(t,0,Number.POSITIVE_INFINITY);const n=$(P("for",D(t)));_[n]=t.valueAsNumber}function te(e){const t=e.currentTarget;if(isNaN(t.valueAsNumber))return;ne(t,Number(t.min),Number(t.max));switch($(P("for",D(t)))){case"shapeSidesAmount":_.sides=t.valueAsNumber;break;case"shapeStarInnerRadius":_.innerRadius=t.valueAsNumber}}function ne(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){const r=e.valueAsNumber;r>n&&(e.valueAsNumber=n);r<t&&(e.valueAsNumber=t)}function re(e){const t=e.currentTarget,n=t.name;t.checked?I[n].id=C.set(10,se,t):C.clear(I[n].id)}function se(e){const t=e.name,n=V(e,".controls__brush-container"),r=z(".controls__input--range",n),s=r.valueAsNumber,o=Number(r.max),i=Number(r.min);s>=o&&(I[t].direction="backwards");s<=i&&(I[t].direction="forwards");const a="forwards"===I[t].direction;r.valueAsNumber=a?s+1:s-1;const u=`${r.valueAsNumber}`,c=r.name;_[c]=r.valueAsNumber,ce(n,u)}function oe(e){const t=e.currentTarget,n=t.valueAsNumber,r=D(t),s=t.name;_[s]=n,ce(r,n)}function ie(e){const t=e.currentTarget,n=O(t.value,"uppercase"),r=D(t);ce(r,n);const s=z("div",D(r)),o=t.id,i=ue(s);_[o]=i?"transparent":n}function ae(e){const t=e.currentTarget,n=R(t.id,"-")[0];if(t.checked){const e=O(z("input[type=color]",D(V(t,"div"))).value,"uppercase");_[n]=e}else _[n]="transparent"}function ue(e){return!z("input[type=checkbox]",e).checked}function ce(e,t){z("span",e).textContent=t}C.arrayOfIds=[];const le=z("canvas.index__canvas"),de=z("fieldset.tools"),he=(z("fieldset.colors"),z("fieldset.controls"),z("fieldset.shapes"));z("fieldset.miscellaneous");!function(){const e=Y("tools__input",de);for(const t of e)t.addEventListener("change",Q);z(".tools__button").addEventListener("click",L)}(),function(){const e=(t=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(t)):Array.from(n.querySelectorAll(t)):Array.from(document.querySelectorAll(t)));var t,n;for(const t of e)t.addEventListener("change",X);z(".colors__input--stroke-width").addEventListener("input",ee)}(),function(){const e=Y("controls__input--checkbox");for(const t of e)t.addEventListener("change",re);const t=Y("input--color");for(const e of t)e.addEventListener("input",ie);const n=Y("show-input");for(const e of n)e.addEventListener("change",ae);const r=Y("controls__input--range");for(const e of r)e.addEventListener("input",oe);const s=Y("controls__input--number");for(const e of s)e.addEventListener("input",ee)}(),function(){const e=Y("shapes__input--radio",he);for(const t of e)t.addEventListener("change",Z);const t=Y("shapes__input--number",he);for(const e of t)e.addEventListener("input",te)}(),z(".miscellaneous__select").addEventListener("change",K),le.addEventListener("mousemove",x),le.addEventListener("mousedown",k),le.addEventListener("mouseup",S),window.addEventListener("resize",fe);function fe(){const e=z("main.index"),{width:t,height:n}=e.getBoundingClientRect();le.width=.97*t,le.height=.97*n}fe(),C.set(3500,(()=>{h("Tracker"),e(_,y),f()}))})()})();