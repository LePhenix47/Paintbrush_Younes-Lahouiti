(()=>{"use strict";(()=>{function t(t,e){return t.getContext("2d",e)}function e(t,e){var s;if(!e)return Array.from(document.getElementsByClassName(t));return(null===(s=null==e?void 0:e.tagName)||void 0===s?void 0:s.includes("-"))?Array.from(e.shadowRoot.getElementsByClassName(t)):Array.from(e.getElementsByClassName(t))}function s(t,e){var s;if(!e)return document.querySelector(t);return(null===(s=null==e?void 0:e.tagName)||void 0===s?void 0:s.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function n(t){return t.parentElement}function r(t,e){return t.closest(e)}function i(t,e){return e.getAttribute(t)}function o(t,e,s){t.removeAttribute(e),t.setAttribute(s,"")}function a(t){o(t,"disabled","enabled")}function u(t){o(t,"enabled","disabled")}const l={tool:"brush",fill:"#000000",stroke:"transparent",strokeWidth:0,size:5,angle:0,shadow:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,hasEditableShape:!1,shape:"line",sides:3,innerRadius:1,globalCompositeOperation:"source-over"},c={x:NaN,y:NaN,isDrawing:!1},h={fill:{animationId:0,hue:0,saturation:0,lightness:0,type:"fill"},stroke:{animationId:0,hue:0,saturation:0,lightness:0,type:"stroke"}},d={size:{id:0,direction:"forwards"},rotation:{id:0,direction:"forwards"}};function f(t){const e=s("canvas.index__canvas"),{x:n,y:r}=e.getBoundingClientRect();c.x=t.x-n,c.y=t.y-r}function p(t){0===t.button&&(c.isDrawing=!0)}function g(t){0===t.button&&(c.isDrawing=!1)}class m{constructor(){}static set(t,e,...s){return this.id=setInterval((()=>{e(...s)}),t),this.arrayOfIds.push(this.id),this.id}static clear(t){const e=this.arrayOfIds.find((e=>e===t));clearInterval(e),this.arrayOfIds=this.arrayOfIds.filter((t=>t!==e))}}m.arrayOfIds=[];const{log:b,error:w,table:v,time:x,timeEnd:y,timeStamp:N,timeLog:k,assert:E,clear:_,count:S,countReset:A,group:I,groupCollapsed:C,groupEnd:L,trace:O,profile:T,profileEnd:z,warn:M,debug:R,info:W,dir:q,dirxml:B}=console;function D(t){return Number(`0x${t}`)}function P(t){return t.toString(16)}function Y(t,e){switch(e.toLowerCase().trim()){case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();case"titlecase":{let e=t.split(" ");for(let t=0;t<e.length;t++){const s=e[t].substring(0,1).toUpperCase(),n=e[t].slice(1).toLowerCase();e[t]=s+n}return e=e.concat(),e.toString()}case"titlecase2":return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}function V(t,e){return t.split(e)}function $(t,e,s){return t.substring(e,s)}function F(t){let e=V(t,"-");for(let t=1;t<e.length;t++)e[t]=Y(e[t],"titlecase");const s=e.join();return n=",",r="",s.replaceAll(n,r);var n,r}function U(t){if((null==t?void 0:t.length)<6||(null==t?void 0:t.length)>7)throw`Error: Unexpected color argument length passed, was expecting a 6 or 7 characters long string but instead got ${t.length}`;let e=t;var s,n;"#"===t.charAt(0)&&(s=1,e=t.slice(s,n));let r=[$(e,0,2),$(e,2,4),$(e,4,6)];for(let t=0;t<r.length;t++){let e=r[t];r[t]=D(e)}return{red:Number(r[0]),green:Number(r[1]),blue:Number(r[2])}}function X(t,e,s){const n=t/255,r=e/255,i=s/255,o=Math.max(n,r,i),a=Math.min(n,r,i),u=o-a,l=(o+a)/2;let c,h;if(o===a)h=0,c=0;else switch(c=l>.5?u/(2-o-a):u/(o+a),o){case n:h=((r-i)/u+(r<i?6:0))/6;break;case r:h=((i-n)/u+2)/6;break;case i:h=((n-r)/u+4)/6}return{hue:Math.round(360*h),saturation:Math.round(100*c),lightness:Math.round(100*l)}}function H(t,e=100,s=50){if(t<0||t>360||e<0||e>100||s<0||s>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const n=t/360,r=e/100,i=s/100,o=(1-Math.abs(2*i-1))*r,a=6*n,u=o*(1-Math.abs(a%2-1));let l,c,h;[l,c,h]=a>=0&&a<1?[o,u,0]:a>=1&&a<2?[u,o,0]:a>=2&&a<3?[0,o,u]:a>=3&&a<4?[0,u,o]:a>=4&&a<5?[u,0,o]:[o,0,u];const d=i-o/2,f=Math.round(255*(l+d)),p=Math.round(255*(c+d)),g=Math.round(255*(h+d));return`#${P(f).padStart(2,"0")}${P(p).padStart(2,"0")}${P(g).padStart(2,"0")}`}function j(t,e,s){let n;e=e.toLowerCase(),s=s.toLowerCase();const r=e.includes("hex")&&s.includes("rgb"),i=e.includes("rgb")&&s.includes("hsl"),o=e.includes("hsl")&&s.includes("hex"),a=e.includes("hsl")&&s.includes("hwb"),u=e.includes("hsl")&&s.includes("rgb"),l=e.includes("rgb")&&s.includes("hex"),c=e.includes("hex")&&s.includes("hsl");if(r)n=U(t);else if(i)n=X(t.red,t.green,t.blue);else if(o)n=H(t.hue,t.saturation,t.lightness);else if(a)n=function(t,e=100,s=50){if(t<0||t>360||e<0||e>100||s<0||s>100)throw new Error("Invalid HSL color values. Hue should be between 0 and 360, saturation and lightness should be between 0 and 100.");const n=e/100,r=s/100,i=t/360,o=1-Math.max(n,r),a=1-Math.min(n,r);return{hue:Math.round(360*i),whiteness:Math.round(100*o),blackness:Math.round(100*a)}}(t.hue,t.saturation,t.lightness);else if(u){n=U(H(t.hue,t.saturation,t.lightness))}else if(l){const e=X(t.red,t.green,t.blue);n=H(e.hue,e.saturation,e.lightness)}else{if(!c)throw new Error("Color model conversion error: Unsupported color model conversion");{const e=U(t);n=X(e.red,e.green,e.blue)}}return n}function G(t){const e=t.currentTarget,n=r(e,".colors__container"),i=s(".colors__input",n),o=i.value,a=i.id,{hue:u,saturation:l,lightness:c}=j(o,"hex","hsl");if(ut(n)||(0===l||0===c||100===c))return;h[a].type=a,h[a].hue=u,h[a].saturation=l,h[a].lightness=c;e.checked?h[a].animationId=m.set(50,J,i,h[a]):m.clear(h[a].animationId)}function J(t,e){e.hue+=2,e.hue%=360;let s=j(e,"hsl","hex");s=Y(s,"uppercase");const r=n(t);t.value=s,lt(r,s),l[e.type]=s}function K(t){const e=t.currentTarget.value;l.globalCompositeOperation=e}function Q(t){const e=t.currentTarget;l.tool=e.id}function Z(t){const e=t.currentTarget,n=V(e.id,"-")[0];l.shape=n;const i="polygon"!==n&&"star"!==n;l.hasEditableShape=!i;const o=r(e,"fieldset"),c=s("input#shape-sides-amount",o),h=s("input#shape-star-inner-radius",o);!0===l.hasEditableShape?a(c):u(c);"star"===n?a(h):u(h)}function tt(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;st(e,0,Number.POSITIVE_INFINITY);const s=F(i("for",n(e)));l[s]=e.valueAsNumber}function et(t){const e=t.currentTarget;if(isNaN(e.valueAsNumber))return;st(e,Number(e.min),Number(e.max));switch(F(i("for",n(e)))){case"shapeSidesAmount":l.sides=e.valueAsNumber;break;case"shapeStarInnerRadius":l.innerRadius=e.valueAsNumber}}function st(t,e=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY){const n=t.valueAsNumber;n>s&&(t.valueAsNumber=s);n<e&&(t.valueAsNumber=e)}function nt(t){const e=t.currentTarget,s=e.name;e.checked?d[s].id=m.set(10,rt,e):m.clear(d[s].id)}function rt(t){const e=t.name,n=r(t,".controls__brush-container"),i=s(".controls__input--range",n),o=i.valueAsNumber,a=Number(i.max),u=Number(i.min);o>=a&&(d[e].direction="backwards");o<=u&&(d[e].direction="forwards");const c="forwards"===d[e].direction;i.valueAsNumber=c?o+1:o-1;const h=`${i.valueAsNumber}`,f=i.name;l[f]=i.valueAsNumber,lt(n,h)}function it(t){const e=t.currentTarget,s=e.valueAsNumber,r=n(e),i=e.name;l[i]=s,lt(r,s)}function ot(t){const e=t.currentTarget,r=Y(e.value,"uppercase"),i=n(e);lt(i,r);const o=s("div",n(i)),a=e.id,u=ut(o);l[a]=u?"transparent":r}function at(t){const e=t.currentTarget,i=V(e.id,"-")[0];if(e.checked){const t=Y(s("input[type=color]",n(r(e,"div"))).value,"uppercase");l[i]=t}else l[i]="transparent"}function ut(t){return!s("input[type=checkbox]",t).checked}function lt(t,e){s("span",t).textContent=e}const ct=s("canvas.index__canvas"),ht=t(ct),dt=s("fieldset.tools"),ft=(s("fieldset.colors"),s("fieldset.controls"),s("fieldset.shapes"));s("fieldset.miscellaneous");!function(){const t=e("tools__input",dt);for(const e of t)e.addEventListener("change",Q);s(".tools__button").addEventListener("click",(t=>{var e,s,n,r;s=ht,n=(e=ct).width,r=e.height,s.clearRect(0,0,n,r)}))}(),function(){const t=(e=".color__input--checkbox:not(input#fill-show, input#stroke-show)",n?n.tagName.includes("-")?Array.from(n.shadowRoot.querySelectorAll(e)):Array.from(n.querySelectorAll(e)):Array.from(document.querySelectorAll(e)));var e,n;for(const e of t)e.addEventListener("change",G);s(".colors__input--stroke-width").addEventListener("input",tt)}(),function(){const t=e("controls__input--checkbox");for(const e of t)e.addEventListener("change",nt);const s=e("input--color");for(const t of s)t.addEventListener("input",ot);const n=e("show-input");for(const t of n)t.addEventListener("change",at);const r=e("controls__input--range");for(const t of r)t.addEventListener("input",it);const i=e("controls__input--number");for(const t of i)t.addEventListener("input",tt)}(),function(){const t=e("shapes__input--radio",ft);for(const e of t)e.addEventListener("change",Z);const s=e("shapes__input--number",ft);for(const t of s)t.addEventListener("input",et)}(),s(".miscellaneous__select").addEventListener("change",K),ct.addEventListener("mousemove",f),ct.addEventListener("mousedown",p),ct.addEventListener("mouseup",g),window.addEventListener("resize",gt);let pt=0;function gt(){const t=s("main.index"),{width:e,height:n}=t.getBoundingClientRect();ct.width=.97*e,ct.height=.97*n}gt();let mt=new class{constructor(e,{tool:s,fill:n,stroke:r,strokeWidth:i,size:o,angle:a,shadow:u,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:d,shape:f,sides:p,innerRadius:g,globalCompositeOperation:m},{x:w,y:v,isDrawing:x}){this.canvas=e,this.context=t(this.canvas),this.updatePropertyValues({tool:s,fill:n,stroke:r,strokeWidth:i,size:o,angle:a,shadow:u,shadowBlur:l,shadowOffsetX:c,shadowOffsetY:h,hasEditableShape:d,shape:f,sides:p,innerRadius:g,globalCompositeOperation:m},{x:w,y:v,isDrawing:x}),b(this)}updatePropertyValues({tool:t,fill:e,stroke:s,strokeWidth:n,size:r,angle:i,shadow:o,shadowBlur:a,shadowOffsetX:u,shadowOffsetY:l,hasEditableShape:c,shape:h,sides:d,innerRadius:f,globalCompositeOperation:p},{x:g,y:m,isDrawing:b}){this.tool=t,this.fill=e,this.stroke=s,this.strokeWidth=n,this.size=r,this.angle=i,this.shadow=o,this.shadowBlur=a,this.shadowOffsetX=u,this.shadowOffsetY=l,this.hasEditableShape=c,this.shape=h,this.sides=d,this.innerRadius=f,this.globalCompositeOperation=p,this.x=g,this.y=m,this.isDrawing=b}drawOnCanvas(){if(!!this.isDrawing)switch(this.shape){case"circle":this.drawCircle();break;case"square":this.drawSquare()}}drawCircle(){this.context.fillStyle=this.fill,this.context.beginPath(),this.context.arc(this.x,this.y,this.size,0,2*Math.PI),this.context.fill(),this.context.strokeStyle=this.stroke;0===this.strokeWidth||(this.context.lineWidth=this.strokeWidth,this.context.stroke())}drawSquare(){this.context.fillStyle=this.fill,this.context.fillRect(this.x-this.size,this.y-this.size,2*this.size,2*this.size),this.context.fill(),this.context.strokeStyle=this.stroke;0===this.strokeWidth||(this.context.strokeRect(this.x-this.size,this.y-this.size,2*this.size,2*this.size),this.context.lineWidth=this.strokeWidth,this.context.stroke())}drawStar(){this.context.save(),this.context.restore()}drawPolygon(){this.context.save(),this.context.restore()}}(ct,l,c);!function t(){mt.drawOnCanvas(),mt.updatePropertyValues(l,c),pt=requestAnimationFrame(t)}(),m.set(3500,(()=>{C("Tracker"),b(mt),L()}))})()})();